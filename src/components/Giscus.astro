---
import { siteConfig } from '../config/site';

const { comments } = siteConfig;
const isConfigured = Boolean(
  comments.giscusRepo &&
    comments.giscusRepoId &&
    comments.giscusCategory &&
    comments.giscusCategoryId
);
---

{isConfigured && (
  <section class="surface-card comments">
    <script
      src="https://giscus.app/client.js"
      data-repo={comments.giscusRepo}
      data-repo-id={comments.giscusRepoId}
      data-category={comments.giscusCategory}
      data-category-id={comments.giscusCategoryId}
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="preferred_color_scheme"
      data-lang="ko"
      data-loading="lazy"
      crossorigin="anonymous"
      async
    ></script>
  </section>
)}

<style>
  .comments {
    width: min(100%, var(--content-narrow));
    margin: 1rem auto 0;
    padding: 1rem;
  }
</style>
