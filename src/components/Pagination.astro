---
interface Props {
  currentPage: number;
  totalPages: number;
  basePath?: string;
}

const {
  currentPage,
  totalPages,
  basePath = ''
} = Astro.props;

const pages = Array.from({ length: totalPages }, (_, index) => index + 1);

function pageUrl(page: number): string {
  if (page <= 1) {
    return basePath || '/';
  }

  return `${basePath.replace(/\/$/, '')}/page/${page}/`;
}
---

{totalPages > 1 && (
  <nav class="pager" aria-label="Pagination">
    {pages.map((page) => (
      <a href={pageUrl(page)} class={page === currentPage ? 'active' : ''} aria-current={page === currentPage ? 'page' : undefined}>
        {page}
      </a>
    ))}
  </nav>
)}

<style>
  .pager {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    margin: 1.4rem 0 0;
  }

  .pager a {
    min-width: 2rem;
    height: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 9px;
    border: 1px solid var(--line);
    background: var(--surface);
    color: var(--text-muted);
    font-size: 0.9rem;
  }

  .pager a.active {
    color: white;
    background: var(--brand);
    border-color: var(--brand);
  }
</style>
