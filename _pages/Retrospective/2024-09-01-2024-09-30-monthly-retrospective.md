---
title: "2024년 9월 회고록"
date: "2024-09-30"
---

# 2024년 9월 개발 회고

## 📊 개요

2024년 9월은 **병원 진료시간표 로직 리팩토링**과 **부서 관리 시스템 구축**에 집중한 달이었습니다. 총 **37개의 이슈**를 완료했으며, 특히 병원 진료시간표 도출 로직을 대폭 개선하고, 직원 부서 관리 체계를 새롭게 구축했습니다. 또한 국민건강보험법 개정에 대응하여 6개월 주기 본인인증 기능을 추가하고, 국군의 날 임시공휴일 처리를 완료했습니다.

**주요 지표:**
- 완료 이슈: 37개
- 백엔드 커밋: 11개 (flyingdoctor-server: 11개, mobidoc-server: 0개)
- 프론트엔드 커밋: 3개 (mobidoc-front: 3개, flyingdoctor-front: 0개)

---

## ✅ 완료한 작업

### 1. 병원 진료시간표 로직 대규모 리팩토링 (1개 이슈, 4개 커밋)

병원 진료시간표 도출 로직을 전면 개편했습니다.

- **이슈 #1**: 병원 진료 시간표 (직원 진료 스케줄 SUM) 도출 서비스 로직 리팩토링 (개선)

**커밋 작업:**
- 병원 진료시간표(의사 진료 스케줄 SUM) 도출 서비스 로직 리팩토링 (2개 커밋)
- 병원 진료시간표 도출 - 접수마감 해제 안되는 버그 수정
- 계정 삭제 시 - 병원 진료시간표 갱신

**핵심 개선:**
- 의사 개별 스케줄을 병원 전체 진료시간으로 통합하는 로직 개선
- 접수마감 상태 관리 로직 수정
- 직원 계정 삭제 시 자동 갱신 기능 추가

**영향:**
- 병원 진료시간 정확도 대폭 향상
- 접수마감 상태 관리 안정화
- 진료시간 표시 오류 감소

### 2. 부서 관리 시스템 구축 (3개 이슈)

직원 부서 관리 체계를 새롭게 구축했습니다.

- **이슈 #1**: 부서 테이블 & 직원 테이블 내 부서 SEQ 컬럼 추가 (하위 작업)
- **이슈 #2**: 부서 기본 값 추가, 의사 계정 부서 SEQ 마이그레이션 (하위 작업)
- **이슈 #3**: 직원(의사, 일반, 관리자) 계정 생성 시 진료시간 데이터 생성 조건 추가 (커밋)

**핵심 기능:**
- 부서 테이블 생성
- 직원 테이블에 부서 SEQ 컬럼 추가
- 기존 의사 계정 부서 데이터 마이그레이션
- 계정 생성 시 진료시간 자동 생성

**영향:**
- 직원 조직 관리 체계 확립
- 부서별 직원 관리 가능
- 진료시간 데이터 일관성 향상

### 3. 국민건강보험법 개정 대응 (1개 이슈)

국민건강보험법 개정에 따른 6개월 주기 본인인증 기능을 추가했습니다.

- **이슈 #1**: 국민건강보험법 개정 - 6개월 주기로 본인인증 (개선)

**핵심 기능:**
- 마지막 본인인증 일자 추적
- 6개월 경과 시 재인증 요구
- 본인인증 이력 관리

**영향:**
- 법적 요구사항 준수
- 환자 정보 보안 강화
- 개인정보 보호 규정 충족

### 4. 국군의 날 임시공휴일 대응 (2개 이슈)

국군의 날(10/1) 임시공휴일 처리를 완료했습니다.

- **이슈 #1**: 국군의 날 10/1 임시 공휴일 설정 필요 (작업)
- **이슈 #2**: 국군의 날 임시공휴일 의사 스케줄 적용 (하위 작업)

**핵심 작업:**
- 임시공휴일 설정
- 의사 스케줄 자동 적용
- 진료시간 표시 조정

**영향:**
- 공휴일 진료시간 정확한 표시
- 환자 혼란 방지

### 5. 마케팅 정보 수신 약관 서비스 (2개 이슈)

마케팅 정보 수신 동의 관리 기능을 추가했습니다.

- **이슈 #1**: 병원 이벤트 알림 & 마케팅정보 수신 동의 약관 서비스 (커밋)
- **이슈 #2**: 마케팅정보 수신 약관 업데이트 - 해당 병원에 등록된 환자가 조회되지 않을 경우 예외처리 (커밋)

**핵심 기능:**
- 마케팅 정보 수신 동의 약관 관리
- 병원별 마케팅 알림 설정
- 환자 미조회 시 예외처리

**영향:**
- 개인정보보호법 준수
- 병원 이벤트 알림 기능 강화

### 6. 병원 접수 상태 Job 개선 (2개 이슈)

병원 접수 상태 배치 작업을 개선했습니다.

- **이슈 #1**: 병원 접수 상태 Job 업데이트 (버그)
- **이슈 #2**: HospitalReceptionOnOffJob 수정 (커밋)

**핵심 개선:**
- 접수 상태 갱신 로직 개선
- 배치 작업 안정화

**영향:**
- 접수 상태 정확도 향상
- 시스템 안정성 확보

### 7. 진료예약 시스템 개선 (5개 이슈)

진료예약 관련 기능을 개선했습니다.

- **이슈 #1**: 마감 이후 의사 진료시간 연장 - 새로고침 해야 적용되는 문제 개선 (개선)
- **이슈 #2**: 의사 스케줄 변경 시 메인 화면 우측 상단 진료시간 및 접수마감상태 즉시 반영 (커밋)
- **이슈 #3**: 예약 현황판 표시되는 시간이 병원 진료시간과 다른 버그 수정 (버그)
- **이슈 #4**: 진료예약 - 20분 후 자동 취소 기능 삭제 (작업)
- **이슈 #5**: 예약 도착확인 시 병원 정보 및 환자 연락처 유실되는 현상 수정 (버그)

**커밋 작업:**
- LocalDate, LocalDateTime, LocalTime 직렬화 추가 (커밋)

**핵심 개선:**
- 의사 스케줄 변경 실시간 반영
- 진료시간 표시 정확도 향상
- 예약 자동 취소 기능 제거 (사용자 편의성)
- 예약 도착확인 데이터 무결성 확보

**영향:**
- 사용자 경험 대폭 개선
- 진료예약 안정성 향상

### 8. DB 작업 및 데이터 정리 (15개 이슈)

**테이블 및 컬럼 추가 (8개)**
- **이슈 #1**: 진료 테이블 sub직원 컬럼 추가 (작업)
- **이슈 #2**: 진료 예약 종료 시간 추가 (작업)
- **이슈 #3**: 예약 종료일 마이그레이션 (작업)
- **이슈 #4**: 컨텐츠 그룹 - 파일 SEQ 컬럼 추가 (작업)
- **이슈 #5**: 컨텐츠 테이블 컬럼 업데이트 (작업)
- **이슈 #6**: 홈페이지 포인트 컬러 컬럼 추가 및 D 타입 레이아웃 추가 (작업)
- **이슈 #7**: 상용구 테이블 추가 (작업)
- **이슈 #8**: patient_account 인덱스 추가 (하위 작업)

**데이터 정리 및 마이그레이션 (5개)**
- **이슈 #1**: 직원 진료 시간 마이그레이션 이슈 수정 (버그)
- **이슈 #2**: PROD - 피드 해시태그 데이터 복구 (작업)
- **이슈 #3**: 컨텐츠, 피드 기존 정렬 구조 업데이트 (작업)
- **이슈 #4**: 컨텐츠 그룹 타입명 수정 (작업)
- **이슈 #5**: 사용하지 않는 (구) 병원 소식 테이블 - 파일 외래키 제거 (버그)

**기타 DB 작업 (2개)**
- **이슈 #1**: doctor-house-call stag 스키마 생성 작업 (작업)
- **이슈 #2**: 이벤트 알람 템플릿 추가 (작업)
- **이슈 #3**: CRM 템플릿 히스토리 - 계정 FK 제거 (작업)

**핵심 개선:**
- 진료 예약 종료 시간 추가로 예약 관리 정확도 향상
- 상용구 테이블로 텍스트 관리 효율성 증가
- patient_account 인덱스로 조회 성능 향상
- 레거시 데이터 정리

**영향:**
- 데이터 구조 개선
- 쿼리 성능 향상
- 시스템 유지보수성 증가

### 9. 환자앱 버그 수정 및 개선 (7개 이슈)

- **이슈 #1**: 앱 재설치 후에도 본인인증 화면에 환자 정보가 남아있는 버그 수정 (버그)
- **이슈 #2**: 가족 추가 - 주민번호 전체 입력 후 앞자리 수정 시 text field 생성 안되는 버그 (버그)
- **이슈 #3**: 병원 홈페이지 - 병원 진료 시간, 다음 진료 invalid date 에러 수정 (버그)
- **이슈 #4**: 진료예약 - 도착확인 & 진료 접수 알림 발신, 수신 안되는 현상 수정 (버그)
- **이슈 #5**: 피드 - 피드 검색에서 검색기능이 잘 안되는 문제 개선 (개선)
- **이슈 #6**: 방문접수 - 알림 - 대기자수 삭제 (개선)
- **이슈 #7**: 의사 - 진료시간 노출 가이드 수정 (개선)

**커밋 작업:**
- 기본 주소 변경 - Async 메소드 분리 (커밋)

**핵심 개선:**
- 본인인증 데이터 보안 강화
- 주민번호 입력 UX 개선
- 진료시간 표시 정확도 향상
- 알림 발송 안정화
- 피드 검색 기능 개선

**영향:**
- 사용자 경험 개선
- 개인정보 보안 강화

### 10. 기타 개선 및 작업 (2개 이슈)

- **이슈 #1**: 홈페이지 alias 개선 (개선)
- **이슈 #2**: 결제수단 중복 데이터 버그 (버그 - 해야 할 일)
- **이슈 #3**: 반복적으로 예약 취소 - 예약 횟수 제한 or 예약 취소 제한 설정 (개선 - 해야 할 일)

---

## 🔧 GitLab 커밋 내역

### 서버 레포지토리 (11 커밋)

**1. 병원 진료시간표 로직 리팩토링 (4개 커밋)**
- 병원 진료시간표(의사 진료 스케줄 SUM) 도출 서비스 로직 리팩토링 (2개)
- 병원 진료시간표 도출 - 접수마감 해제 안되는 버그 수정
- 계정 삭제 시 - 병원 진료시간표 갱신

**2. 부서 관리 및 직원 계정 개선 (1개 커밋)**
- 직원(의사, 일반, 관리자) 계정 생성 시 진료시간 데이터 생성 조건 추가

**3. 진료예약 시스템 개선 (2개 커밋)**
- 의사 스케줄 변경 시 메인 화면 우측 상단 진료시간 및 접수마감상태 즉시 반영
- LocalDate, LocalDateTime, LocalTime 직렬화

**4. 마케팅 약관 서비스 (2개 커밋)**
- 병원 이벤트 알림 & 마케팅정보 수신 동의 약관 서비스
- 마케팅정보 수신 약관 업데이트 - 환자 미조회 시 예외처리

**5. 배치 작업 개선 (1개 커밋)**
- HospitalReceptionOnOffJob 수정

**6. 기타 개선 (1개 커밋)**
- 기본 주소 변경 - Async 메소드 분리

### 프론트엔드 레포지토리 (0 커밋)

**12개월 연속 백엔드 집중 (2023.10 ~ 2024.09)**
- 병원 진료시간표 로직 리팩토링, 부서 관리 시스템 구축 우선
- 프론트엔드는 기존 기능 유지

---

## 🎯 주요 성과 및 인사이트

### 1. 병원 진료시간표 로직 대규모 리팩토링 완료 🎯

병원 진료시간표 도출 로직을 전면 개편하여 정확도와 안정성을 대폭 향상시켰습니다.

**주요 개선:**
- 의사 개별 스케줄 통합 로직 개선
- 접수마감 상태 관리 안정화
- 직원 계정 삭제 시 자동 갱신
- 실시간 진료시간 반영

**기술적 도전:**
- 여러 의사의 스케줄을 병원 전체 시간으로 통합하는 복잡한 로직
- 접수마감 상태와 진료시간의 동기화
- 스케줄 변경 시 실시간 반영

**영향:**
- 병원 진료시간 표시 정확도 대폭 향상
- 예약 현황판 시간 불일치 문제 해결
- 사용자 혼란 감소

**전략적 의미:**
- 진료예약 시스템의 핵심 로직 안정화
- 향후 복잡한 스케줄 관리 기능 확장 기반 마련

### 2. 부서 관리 시스템 신규 구축 🏢

직원 조직 관리를 위한 부서 관리 체계를 새롭게 구축했습니다.

**구축 내역:**
- 부서 테이블 생성
- 직원 테이블에 부서 SEQ 컬럼 추가
- 기존 의사 계정 부서 마이그레이션
- 계정 생성 시 진료시간 자동 생성 로직

**영향:**
- 직원 조직 관리 체계 확립
- 부서별 직원 그룹핑 가능
- 진료시간 관리 자동화

**전략적 의미:**
- 병원 내부 조직 관리 고도화
- 향후 부서별 권한 관리, 통계 분석 기반 마련

### 3. 국민건강보험법 개정 대응 완료 ⚖️

국민건강보험법 개정에 따른 6개월 주기 본인인증 기능을 추가했습니다.

**주요 작업:**
- 마지막 본인인증 일자 추적
- 6개월 경과 시 재인증 요구 로직
- 본인인증 이력 관리

**영향:**
- 법적 요구사항 준수
- 환자 정보 보안 강화
- 개인정보 보호 규정 충족

**전략적 의미:**
- 법률 변경에 신속하게 대응
- 규제 준수 체계 확립

### 4. DB 작업 비중 40.5% (15개/37개) 🗄️

9월은 DB 작업이 많았던 달입니다.

**주요 DB 작업:**
- 부서 관리 테이블 (2개)
- 진료 예약 관련 (3개)
- 컨텐츠 관리 (4개)
- 데이터 마이그레이션 (3개)
- 기타 테이블 작업 (3개)

**전략적 의미:**
- 시스템 확장을 위한 데이터 구조 개선
- 성능 최적화 (인덱스 추가)
- 레거시 데이터 정리

### 5. 진료예약 실시간 반영 기능 개선 ⏱️

의사 스케줄 변경 시 즉시 반영되도록 개선했습니다.

**주요 개선:**
- 의사 스케줄 변경 실시간 반영
- 진료시간 연장 즉시 적용
- 접수마감 상태 자동 갱신

**기술적 해결:**
- LocalDate, LocalDateTime, LocalTime 직렬화 추가
- 스케줄 변경 이벤트 처리

**영향:**
- 사용자가 새로고침 없이 최신 정보 확인
- 사용자 경험 대폭 개선

### 6. 작업 이슈 비중 45.9% (17개/37개) 🔧

9월은 작업 이슈가 많았던 달로, DB 구조 개선과 시스템 확장에 집중했습니다.

**작업 이슈 내역:**
- DB 작업 (15개)
- 공휴일 설정 (1개)
- 기능 제거 (1개)

**전략적 의미:**
- 신규 기능 개발보다 기반 구축에 집중
- 시스템 안정성 및 확장성 확보

### 7. 프론트엔드 작업 (3개 커밋) 📱

9월에는 mobidoc-front에서 3개의 커밋이 진행되었습니다.

**커밋 작업:**
- **[MPT-6161] 앱 최초 실행 시 본인인증 입력 값 초기화** (2024-09-30)
  - 앱 재설치 후에도 본인인증 화면에 환자 정보가 남아있던 문제 해결
  - 개인정보 보호 강화

- **[MPT-6167] 오전마감 상태 전환 로직 수정** (2024-09-30)
  - 통합 시스템의 오전마감 상태 처리 개선
  - 진료시간표 리팩토링과 연계된 작업

- **[MPT-4482] 미사용 API 제거** (2024-09-25)
  - 코드 정리 및 유지보수성 개선
  - 불필요한 API 호출 제거

**영향:**
- 개인정보 보호 강화
- 진료시간 관리 안정화
- 코드베이스 최적화

### 8. 백엔드 중심 개발 지속 (2023.10 ~ 2024.09) 🏗️

**누적 성과:**
- 공적처방전달 시스템 구축 (2023.10-12)
- 진료 프로세스 개선 (2024.01-03)
- 태블릿 접수 전면 개편 (2024.03)
- 진료 테이블 v2 마이그레이션 (2024.04)
- 결제 시스템 안정화 (2024.05)
- 병원 구독 서비스 + 홈페이지 레이아웃 시스템 (2024.06)
- 피드 시스템 마이그레이션 + 환자앱 UX 대규모 개선 (2024.07)
- 직원관리 시스템 구축 + 진료예약 로직 개편 + API 문서화 (2024.08)
- **병원 진료시간표 리팩토링 + 부서 관리 시스템 + 법률 개정 대응 (2024.09)** ⭐

**효과:**
- 백엔드 시스템 완전 안정화
- 법률 및 규제 준수 체계 확립
- 조직 관리 기능 고도화

---

## 📅 다음 달 계획

### 1. 부서 관리 기능 고도화

9월에 구축한 부서 관리 시스템을 더욱 정교하게 개선합니다.

**주요 작업:**
- 부서별 권한 관리
- 부서별 통계 분석
- 부서 조직도 UI 구현

### 2. 진료시간표 모니터링 및 최적화

리팩토링한 진료시간표 로직의 성능을 모니터링하고 최적화합니다.

**주요 작업:**
- 진료시간표 도출 성능 측정
- 캐싱 전략 수립
- 병목 지점 개선

### 3. 예약 횟수 제한 기능 구현

반복적인 예약 취소를 방지하기 위한 제한 기능을 구현합니다.

**주요 작업:**
- 예약 취소 이력 추적
- 제한 정책 설정 (횟수, 기간)
- 제한 알림 기능

### 4. 결제수단 중복 데이터 해결

결제수단 중복 데이터 문제를 근본적으로 해결합니다.

**주요 작업:**
- 중복 발생 원인 분석
- 방어 로직 추가
- 데이터 정합성 체크 자동화

---

## 📈 통계

### 이슈 분류

| 분류 | 개수 | 비율 |
|------|------|------|
| 작업 | 17개 | 45.9% |
| 버그 | 13개 | 35.1% |
| 개선 | 5개 | 13.5% |
| 하위 작업 | 3개 | 8.1% |
| 해야 할 일 | 2개 | 5.4% |
| **합계** | **37개** | **100%** |

### 도메인별 분류

| 도메인 | 개수 | 비율 |
|--------|------|------|
| DB | 15개 | 40.5% |
| 통합 시스템 | 9개 | 24.3% |
| 환자앱 | 8개 | 21.6% |
| Batch | 2개 | 5.4% |
| 홈페이지 | 1개 | 2.7% |
| 공통 | 2개 | 5.4% |
| **합계** | **37개** | **100%** |

### 우선순위 분석

| 우선순위 | 개수 | 설명 |
|----------|------|------|
| 높음 | 10개 | 진료시간표 리팩토링, 본인인증, 부서 관리, 접수 상태 Job |
| 중간 | 20개 | DB 작업, 진료예약 개선, 환자앱 버그 수정 |
| 낮음 | 7개 | UI 수정, 데이터 정리, 가이드 수정 |

### 커밋 통계

| 항목 | 수량 |
|------|------|
| 서버 커밋 (BE) | 11개 |
| 프론트엔드 커밋 (FE) | 3개 |
| **총 커밋** | **14개** |

**레포지토리별 상세:**
- flyingdoctor-server (stag): 11개
- mobidoc-server (develop): 0개
- flyingdoctor-front (develop): 0개
- mobidoc-front (develop): 3개

### 월별 비교 (2024년 1월~9월)

| 월 | 이슈 | 서버 커밋 | 주요 특징 |
|----|------|-----------|-----------|
| 1월 | 30개 | 22개 | 공적처방전달 안정화 |
| 2월 | 35개 | 20개 | ConsultController 리팩토링 |
| 3월 | 45개 | 25개 | 태블릿 접수 전면 개편 |
| 4월 | 80개+ | 30개+ | 진료 테이블 v2 마이그레이션 |
| 5월 | 37개 | 18개 | 결제 시스템 안정화 |
| 6월 | 40개 | 15개 | 병원 구독 + 홈페이지 레이아웃 |
| 7월 | 50개 | 17개 | 피드 마이그레이션 + 환자앱 UX 개선 |
| 8월 | 61개 | 13개 | 직원관리 시스템 + 진료예약 로직 개편 |
| **9월** | **37개** | **14개** | **진료시간표 리팩토링 + 부서 관리 + 법률 대응** |

---

## 💭 회고

### 잘한 점 (Keep) ✅

1. **병원 진료시간표 로직 대규모 리팩토링**
   - 의사 스케줄 통합 로직 개선
   - 접수마감 상태 관리 안정화
   - 실시간 진료시간 반영

2. **부서 관리 시스템 신규 구축**
   - 부서 테이블 및 직원 부서 관계 구축
   - 기존 데이터 마이그레이션 성공
   - 조직 관리 기반 마련

3. **국민건강보험법 개정 대응**
   - 법률 변경에 신속하게 대응
   - 6개월 주기 본인인증 기능 구현
   - 규제 준수 체계 확립

4. **DB 구조 개선 (15개 작업)**
   - 진료 예약 종료 시간 추가
   - patient_account 인덱스 추가
   - 상용구 테이블 구축

5. **진료예약 실시간 반영 기능 개선**
   - 의사 스케줄 변경 즉시 반영
   - 사용자 경험 대폭 개선

6. **프론트엔드 개인정보 보호 강화**
   - 앱 재설치 시 본인인증 정보 초기화 구현
   - 개인정보 보호 및 보안 강화
   - 진료시간표 리팩토링과 연계된 FE 작업 완료

### 개선할 점 (Problem) 🔧

1. **작업 이슈 비중 높음 (45.9%)**
   - DB 작업이 많아 개발 이슈 비중 높음
   - 버그 비율도 35.1%로 높음
   - 테스트 커버리지 부족 추정

2. **커밋 수 감소 (11개)**
   - 이슈 수는 37개인데 커밋 수는 11개로 적음
   - 이슈당 커밋 비율 낮음 (0.30)
   - 여러 이슈를 하나의 커밋으로 처리했을 가능성

3. **해야 할 일 이슈 존재 (2개)**
   - 결제수단 중복 데이터 미해결
   - 예약 취소 제한 기능 미구현
   - 우선순위 관리 필요

4. **진료시간표 리팩토링 관련 커밋 분산**
   - 하나의 큰 작업이 여러 커밋으로 분산
   - 리팩토링 후 버그 수정 발생
   - 초기 테스트 부족

### 시도할 점 (Try) 🚀

1. **테스트 코드 커버리지 목표 재설정**
   - 주요 서비스 80% 커버리지 목표
   - 진료시간표 로직 통합 테스트 작성
   - 리팩토링 전후 테스트 자동화

2. **커밋 단위 및 메시지 개선**
   - 이슈별 커밋 단위 명확화
   - 리팩토링과 버그 수정 분리
   - 작은 단위로 자주 커밋

3. **해야 할 일 이슈 우선순위화**
   - 결제수단 중복 데이터 근본 원인 해결
   - 예약 취소 제한 기능 구현
   - 백로그 관리 강화

4. **부서 관리 기능 고도화**
   - 부서별 권한 관리
   - 부서별 통계 분석
   - 조직도 UI 구현

5. **진료시간표 성능 모니터링**
   - 리팩토링 후 성능 측정
   - 캐싱 전략 수립
   - 병목 지점 개선

---

## 🏆 주요 키워드

`#진료시간표리팩토링` `#부서관리시스템` `#국민건강보험법대응` `#6개월주기본인인증` `#국군의날임시공휴일` `#마케팅약관서비스` `#DB구조개선` `#실시간진료시간반영` `#12개월백엔드집중` `#조직관리고도화`
