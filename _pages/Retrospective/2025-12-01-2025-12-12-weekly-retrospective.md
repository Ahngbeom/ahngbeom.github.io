---
title: "주간 회고록 (2025.12.01 ~ 2025.12.12)"
date: "2025-12-12"
tags: [회고, 모비닥, 주간회고]
---

## 개요

2025년 12월 첫째~둘째 주 회고록입니다. CRM 결제수단 버그 수정, QR/태블릿 진료 신청서 버그 수정과 함께 상품 관리 시스템 개발에 착수했습니다. 또한 환자 데이터 관련 버그들과 캐싱 이슈를 처리했습니다.

---

## 완료한 작업

### 버그 수정

| 제목 | 설명 |
|------|------|
| [통합] 모비닥 CRM 포인트 충전 > 등록한 결제수단 삭제가 안됨 | CRM 결제수단 삭제 기능 수정 |
| [환자] QR & 태블릿 진료신청서 - 당일 가예약 도착확인할 수 없음 | 가예약 환자 도착 확인 플로우 수정 |

#### 상세 내용

**MPT-8756: CRM 결제수단 삭제 불가 이슈**
- 모비닥 CRM에서 포인트 충전용으로 등록한 결제수단이 삭제되지 않는 버그 수정

**MPT-8704: 태블릿 진료신청서 접수 마감 알림 현상**
- 태블릿 진료신청서를 켜놓은 상태로 다음날이 되면 접수 마감 알림이 뜨는 현상 수정
- **원인**: 캐싱된 병원 운영시간 정보를 다음날에도 재활용하면서 발생
- **해결**: 병원 운영 시간 정보 캐시 데이터 유효시간을 5분으로 설정, 진료 접수 버튼 클릭 시 날짜 비교하여 최신 데이터로 갱신

**QR/태블릿 진료신청서 버그**
- 당일 가예약 환자가 QR/태블릿으로 도착 확인이 불가능한 현상

**테스트 시나리오 정립**
1. **가예약 케이스**: 통합에서 가예약 생성 → 환자가 연락처 입력 → 가예약 진료 조회 → 환자 정보 입력 → 증상 입력 → 접수 완료
2. **예약 케이스**: 통합에서 진료 예약 생성 → 환자가 연락처 입력 → 예약 진료 조회 → 접수 완료
3. **신규 접수**: 가예약/예약 없음 → 환자가 연락처 입력 → 신규 환자 페이지로 리다이렉트

### 개선

| 제목 | 설명 |
|------|------|
| [환자] 본인인증을 통한 가족 환자 연결 프로세스 개선 | 연락처는 동일하지만 이름이 다른 가족 환자 데이터 연결 프로세스 개선 |

#### 상세 내용

**MPT-8134: 가족 환자 연결 프로세스**
- 연락처는 동일하지만 이름이 다른 가족 환자 데이터와의 연결 과정이 정상적으로 이루어지지 않던 문제 해결
- 이외 다른 에러가 발생하더라도 APM에만 기록하고, 클라이언트 단에게는 에러를 전달하지 않도록 개선

---

## 진행 중인 작업

### 새 기능 개발

| 제목 | 상태 | 설명 |
|------|------|------|
| [관리자][통합] Phase 1: 모비닥 상품 관리 개선 및 추가 기능 | 진행 중 | 상품 관리 시스템 1단계 개발 착수 |

#### 계획된 작업 범위

**Phase 1 목표 (2025.12.23 완료 예정)**
- [ ] 무료 홈페이지 서비스 기한 조정 기능
- [ ] 서비스 만료 일주일 전 SMS 안내 발송
- [ ] 구독 관리 페이지 탭 UI 및 상태별 테이블
- [ ] 구독 정렬, 일시정지, 무료 구독 기능
- [ ] 상품 카테고리 관리
- [ ] 웹소켓 실시간 갱신

### 배치/자동화 작업

| 제목 | 상태 | 설명 |
|------|------|------|
| [Batch] 모비닥 앱 처방 알림 전송 프로세스 작업 | 모니터링 | 모비닥 앱 처방 알림 전송 배치 프로세스 개발 |
| [환자] 테스트 자동화용 계정 생성 | 모니터링 | 본인인증 없이 이름, 전화번호, 주민번호만으로 접속 가능한 테스트 계정 |

### 버그 분석 및 대응

| 제목 | 상태 | 설명 |
|------|------|------|
| [병홈] 홈페이지로 예약 시 통합에서 초진아이콘 등장 | 해야 할 일 | 홈페이지 예약 시 초진 아이콘 표시 오류 분석 필요 |
| [통합] 환자 상세에서 가족 환자의 진료가 같이 표시됨 | 분석 중 | 가족 환자 진료 내역 분리 필요 |
| [통합] 환자 상세 - DB 중복 진료 | 분석 중 | 중복 생성된 진료 데이터 정리 필요 |

---

## 주요 성과 및 인사이트

### 1. 캐싱 전략 개선
- 태블릿 진료신청서의 병원 운영시간 캐싱 문제 해결
- 캐시 유효시간(TTL) 5분 설정으로 데이터 신선도와 성능 간 균형 확보
- 날짜 변경 감지 로직 추가로 캐시 무효화 처리

### 2. 진료 신청 플로우 테스트 시나리오 정립
- QR/태블릿 진료 신청서의 3가지 케이스별 플로우 문서화
- 가예약, 예약, 신규 접수 각각의 예상 동작 정의
- 버그 재발 방지를 위한 테스트 기준 수립

### 3. 상품 관리 시스템 Phase 1 설계
- 무료 서비스 → 유료 구독 전환 비즈니스 모델 구체화
- 구독 상태 관리 (활성, 일시정지, 만료) 설계
- 웹소켓 기반 실시간 데이터 동기화 아키텍처 수립

### 4. 데이터 정합성 이슈 발견
- 환자 상세 페이지에서 가족 환자 진료 혼재 문제 발견
- DB 중복 진료 데이터 발견 → 데이터 정리 및 방지 로직 필요

---

## 다음 주 계획

1. **Phase 1 개발 진행**: 구독 관리 페이지 UI 및 백엔드 구현
2. **버그 수정**: 가족 환자 진료 분리, DB 중복 진료 정리
3. **병원 홈페이지 구독 서비스 연동**: Phase 1 완료 후 통합 테스트

---

## 통계

- **총 이슈 수**: 10개
- **완료**: 2개 (20%)
- **진행 중/모니터링**: 5개 (50%)
- **해야 할 일/분석 중**: 3개 (30%)

---

## 기술 부채

이번 주에 발견된 기술 부채:

| 항목 | 설명 | 우선순위 |
|------|------|---------|
| 가족 환자 진료 분리 | 환자 상세 조회 시 가족 환자 진료가 함께 표시되는 문제 | Medium |
| DB 중복 진료 | 중복 생성된 진료 데이터 정리 및 방지 로직 필요 | Medium |
