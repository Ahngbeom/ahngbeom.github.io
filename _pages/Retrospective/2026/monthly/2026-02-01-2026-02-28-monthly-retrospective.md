---
title: "월간 회고록 (2026.02.01 ~ 2026.02.28)"
date: "2026-02-28"
tags: [회고, 모비닥, 월간회고]
permalink: /Retrospective/2026-02-01-2026-02-28-monthly-retrospective.html
---

## 개요

2026년 2월 한 달간의 회고록입니다. 문진표 시스템 전면 재설계, 비교 통계 API 고도화, 분산 락 인프라 구축에 집중한 달이었습니다. 총 52개의 커밋을 작성했으며, 특히 문진표(MPT-8995)와 비교 통계(MPT-8953/8988) 두 대형 작업이 전체의 79%를 차지하는 집중적인 개발 패턴을 보였습니다.

---

## 완료한 작업

### 백엔드 (mobidoc-server) - 30개 커밋

#### 문진표 시스템 전면 재설계 (MPT-8995) - 12개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-12 | refactor: 문진표 API Facade 패턴 및 전용 DTO 도입 | Controller ↔ Service 간 책임 분리, DTO 5종 신규 |
| 02-12 | feat: 문진표 템플릿 JSON 직렬화 개선 | @JsonTypeInfo 적용, static → 인스턴스 메서드 전환 |
| 02-12 | feat: 문진표 선택지 셔플 및 병원 템플릿 응답 DTO 도입 | 선택지 랜덤화 기능 |
| 02-12 | feat: 문진표 템플릿 버전 관리 및 히스토리 기능 구현 | Optimistic Locking, 히스토리 계층 신규 |
| 02-12 | feat: 문진표 답변에 템플릿 참조 및 JSON 듀얼 리드 지원 | 레거시 호환 듀얼 리드 |
| 02-12 | docs: 문진표 API 프론트엔드 가이드 및 claudedocs 구조 정리 | 개발 문서화 |
| 02-12 | test: 문진표 시스템 핵심 비즈니스 로직 단위 테스트 추가 | 35개 테스트 케이스 |
| 02-12 | chore: Gradle 빌드 설정 최적화 및 정리 | 빌드 캐시, JVM 메모리 설정 |
| 02-13 | fix: 초진문진표 기본 템플릿 생성 오류로 인해 병원 생성 실패 현상 수정 | 프로덕션 버그 수정 |
| 02-13 | chore: .gitignore 경로 추가 | 빌드 산출물 정리 |

#### 비교 통계 Strategy Pattern 재설계 (MPT-8953/MPT-8988) - 10개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-09 | feat: 비교 통계 Strategy Pattern 인프라 구축 | MetricType/DenominatorType 상수, 전략 인터페이스 |
| 02-09 | feat: 비교 통계 요청 객체 추가 | DTO/Builder 패턴, 단위 테스트 |
| 02-09 | refactor: HospitalConsultComparisonService에 Strategy Pattern 적용 | 유연한 비교 유형 지원 |
| 02-09 | refactor: 비교 통계 API를 별도 컨트롤러로 분리 | 단일 책임 원칙 적용 |
| 02-09 | chore: 통계 분석 Jupyter 환경 구성 | 분석 환경 세팅 |
| 02-09 | feat: DOCTOR 분모 전략 구현 | 의사 1인당 메트릭 |
| 02-09 | refactor: 비교 통계 API 정리 및 RestDoc 테스트 추가 | API 문서 자동화 |
| 02-09 | fix: 5분 주기 통계 모니터링 불일치 개선 | consultSeq 기반 정합성 검증 |
| 02-09 | docs: FE 가이드 내용을 consult-statistic 문서에 통합 | 도메인 문서 통합 |
| 02-09 | refactor: 비교 통계를 배치 쿼리 기반으로 전환 | 성능 최적화 |

#### 분산 락 인프라 (MPT-7735) - 4개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-09 | feat: @DistributedLock strict 모드 추가 | 락 실패 시 예외 발생 모드 |
| 02-09 | feat: 분산 락 예외 처리 인프라 추가 | 409 Conflict 응답 핸들러 |
| 02-09 | feat: 결제 API에 분산 락 적용하여 중복 결제 방지 | Testcontainers 통합 테스트 |
| 02-09 | test: 분산 락 테스트 강화 및 CI 자동화 기반 마련 | dockerTest task 추가 |

#### 기타 작업 - 4개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-02 | feat: autoLogin에 분산 락 적용하여 동시성 문제 해결 (MPT-8982) | DB Lock wait timeout 해결 |
| 02-02 | chore: PDF 합성 서버 주소 변경 | 로컬 환경 VPN 전환 |
| 02-06 | feat: QUICK 모드 오프라인 진료 처리 구현 (MPT-8977) | 알림 시 실제 진료 상태 전송 |
| 02-12 | fix: 모비닥 APP 환경 QUICK 모드 도착확인 처리 수정 (MPT-8977) | 도착확인 로직 수정 |

### 프론트엔드 (mobidoc-front) - 22개 커밋

#### 문진표 시스템 프론트엔드 (MPT-8995) - 14개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-12 | feat: 문진 템플릿 Forms API 전환 및 타입 리팩토링 | Discriminated Union, Forms API 전환 |
| 02-12 | feat: 문진 템플릿 Discriminated Union 타입 정의 및 변환 레이어 | API/UI 계층 분리 |
| 02-12 | feat: 문진 템플릿 version 필드 추가 (Optimistic Locking) | 버전 충돌 방지 |
| 02-12 | refactor: 미사용 레거시 문진 컴포넌트 3개 삭제 | 데드코드 제거 |
| 02-12 | refactor: SymptomGuide QuestionnaireType enum 적용 | 타입 안전성 개선 |
| 02-12 | refactor: QAList 새 타입 적용 및 디버깅 console.log 제거 | structuredClone 깊은 복사 |
| 02-12 | fix: QuestionnairePreview filter 누락 수정 및 options 이중 변환 제거 | 불필요한 변환 정리 |
| 02-12 | fix: QuestionnaireWrite 신규 생성 시 denormalize 적용 및 enum 통일 | null 복원 직렬화 |
| 02-12 | fix: 환자앱 문진 null-safe 접근 및 타입 안전성 개선 | 런타임 안정성 |
| 02-12 | test: 문진 검증 edge case 테스트 추가 | useQuestionnaire, ClinicBooking 검증 |
| 02-12 | chore: .gitignore에 .superset/ 추가 | 빌드 산출물 정리 |
| 02-12 | chore: AGENTS.md 파일 추가 | AI 도구 설정 |

#### 비교 통계 차트 (MPT-8988) - 5개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-09 | refactor: dailyAverage → perHospital/perDoctor 비교 API 인터페이스 전환 | 타입/API 리네이밍 |
| 02-09 | feat: 비교 라인 차트 팩토리 함수 및 in-place 업데이트 지원 | 차트 동적 업데이트 |
| 02-09 | refactor: 비교 통계 쿼리 훅을 perHospital/perDoctor로 분리 | React Query 훅 분리 |
| 02-09 | feat: 병원당/의사당 비교 차트 오버레이 통합 및 비차단 렌더링 | 비동기 오버레이 렌더링 |
| 02-12 | fix: 의사 1인당 환자 수 평균 라벨 변경 | UI 라벨 수정 |

#### 기타 작업 - 3개 커밋

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-06 | feat: QUICK 모드 오프라인 진료 처리 구현 (MPT-8977) | 완료 페이지 CONSULT_ACCEPT 대응 |
| 02-06 | fix: 도착 확인 스킵 예외 케이스 처리 (MPT-8977) | 바텀시트 닫기 후 중복 접수 방지 |
| 02-09 | fix: APM 트랜잭션 레벨 필터링 추가 - 외부 서비스 차단 | 월간 APM 데이터 35% 감소 |

### mobidoc-database - 4개 커밋 (자동화)

| 날짜 | 커밋 | 설명 |
|------|------|------|
| 02-02 | [Auto] Schema Sync - 2026-02-02 | 자동 스키마 동기화 |
| 02-06 | [Auto] Schema Sync - 2026-02-06 | 자동 스키마 동기화 |
| 02-13 | [Auto] Schema Sync - 2026-02-13 | 자동 스키마 동기화 |
| 02-15 | [Auto] Schema Sync - 2026-02-15 | 자동 스키마 동기화 |

---

## 주요 성과 및 인사이트

### 1. 문진표 시스템 전면 재설계 (MPT-8995) - 26개 커밋

2월의 최대 작업으로, 백엔드와 프론트엔드를 동시에 재설계한 대형 프로젝트입니다.

**백엔드 아키텍처 개선:**
- **Facade 패턴** 도입으로 Controller ↔ Service 간 책임 분리
- **Optimistic Locking** 적용으로 동시 편집 충돌 방지 (version 필드 + WHERE 조건)
- **JSON 듀얼 리드** 지원으로 레거시 데이터 하위 호환성 보장
- **히스토리 기능** 신규 구현 (템플릿 변경 이력 추적)
- **전용 DTO 5종** 신규 생성 (record 타입)
- **35개 단위 테스트** 추가

**프론트엔드 타입 시스템 혁신:**
- **Discriminated Union 타입** 기반 QuestionnaireTemplateForm 신규 정의
- **normalize/denormalize 변환 레이어**로 API(null) ↔ UI(undefined) 계층 분리
- **Forms API 전환**으로 JSON.parse 직접 호출 제거
- **레거시 컴포넌트 3개 삭제** (데드코드 정리)

**의미:**
- 문진표 기능의 확장성과 유지보수성 대폭 향상
- 타입 안전성 강화로 런타임 에러 사전 방지
- 백엔드-프론트엔드 간 일관된 데이터 계약 수립

### 2. 비교 통계 API 고도화 (MPT-8953/MPT-8988) - 15개 커밋

1월에 시작한 타병원 비교 통계 기능의 아키텍처를 Strategy Pattern으로 전면 재설계했습니다.

**백엔드:**
- **Strategy Pattern** 인프라 구축 (MetricStrategy + DenominatorStrategy)
- 3개 메트릭(환자 수, 진료 수, 신환 수) × 2개 분모(병원당, 의사당) 조합 지원
- **배치 쿼리 기반 전환**으로 성능 최적화
- **별도 컨트롤러 분리**로 단일 책임 원칙 적용
- **5분 주기 모니터링** consultSeq 기반 정합성 검증으로 정확도 개선

**프론트엔드:**
- **perHospital/perDoctor** 비교 쿼리 훅 분리
- **비차단 렌더링**: 기본 통계 먼저 표시 → 비교 데이터 비동기 오버레이
- **차트 팩토리 함수** 및 in-place 업데이트 지원

**효과:**
- 새로운 비교 유형 추가 시 전략 클래스만 구현하면 되는 확장 구조
- 차트 렌더링 성능 개선 (비차단 방식)

### 3. 분산 락 인프라 구축 (MPT-7735/MPT-8982) - 5개 커밋

결제 시스템과 환자 로그인의 동시성 문제를 Redis 분산 락으로 해결했습니다.

**구현 내용:**
- **@DistributedLock strict 모드**: 락 획득 실패 시 409 Conflict 응답
- **결제 API 중복 방지**: consultGroupSeq 기반 직렬화
- **autoLogin 동시성 해결**: DB Lock wait timeout → Redis 분산 락 전환
- **Testcontainers 기반 통합 테스트** 및 CI dockerTest task

**효과:**
- 중복 결제 원천 차단
- 동시 로그인 요청 시 데이터 정합성 보장
- CI 파이프라인에서 선택적 Docker 테스트 실행 가능

### 4. QUICK 모드 오프라인 진료 (MPT-8977) - 4개 커밋

QUICK 모드의 오프라인 진료 상태 처리를 백엔드와 프론트엔드 양쪽에서 구현했습니다.

- 환자 알림 시 실제 진료 상태(CON-REQ, CON-ACC) 전송
- 도착 확인 스킵 후 신규 진료 신청 시 중복 접수 방지
- 완료 페이지 CONSULT_ACCEPT 상태 대응

### 5. APM 비용 최적화 - 1개 커밋

외부 분석 서비스 트랜잭션을 하이브리드 필터링으로 차단했습니다.

- **9개 외부 도메인** RegExp 차단 (Clarity, GA, Beusable, Supabase 등)
- **이중 필터링**: ignoreTransactions(90%) + addFilter(10%)
- **예상 효과**: 월간 APM 데이터 35% 감소, 약 $350/월 비용 절감

---

## 통계 분석

### 커밋 유형별 분류

| 유형 | 수량 | 비율 | 주요 내용 |
|------|------|------|-----------|
| ✨ feat (새 기능) | 19 | 36.5% | 문진표 버전 관리, Strategy Pattern, 분산 락, 비교 차트 |
| 🐛 fix (버그 수정) | 12 | 23.1% | 문진표 null-safe, 통계 모니터링, QUICK 모드, APM 필터링 |
| ♻️ refactor (리팩토링) | 10 | 19.2% | Facade 패턴, API 분리, 타입 전환, 레거시 삭제 |
| 🔧 chore (기타) | 5 | 9.6% | .gitignore, Gradle, Jupyter, AGENTS.md |
| ✅ test (테스트) | 4 | 7.7% | 문진표 35개 케이스, 분산 락 CI, edge case |
| 📝 docs (문서화) | 2 | 3.8% | FE 가이드 통합, claudedocs 구조 |

**해석:**
- 새 기능(36.5%)과 리팩토링(19.2%)의 합이 55.7%로 아키텍처 개선에 집중
- 버그 수정(23.1%)은 주로 새 기능 안정화 과정에서 발생
- 테스트(7.7%)는 분산 락과 문진표 핵심 로직에 집중

### 레포지토리별 분석

| 레포지토리 | 커밋 수 | 비율 | 주요 작업 |
|-----------|--------|------|-----------|
| mobidoc-server | 30 | 57.7% | 문진표, 통계, 분산 락 |
| mobidoc-front | 22 | 42.3% | 문진표 UI, 통계 차트, APM |

**특징:**
- 백엔드 비중이 약간 높으나 거의 균등한 풀스택 작업
- 1월(5개 레포) 대비 2월은 2개 레포에 집중

### 일별 커밋 활동

```
2026-02-02: ██ (2개)
2026-02-06: ███ (3개)
2026-02-09: █████████████████ (17개) 🔥 비교 통계 + 분산 락
2026-02-10: █ (1개)
2026-02-12: ███████████████████████████ (27개) 🔥🔥 문진표 집중
2026-02-13: ██ (2개)
```

**활동 패턴 분석:**
- **가장 활발한 날**: 2026-02-12 (27개 커밋) - 문진표 백엔드+프론트 동시 배포
- **두 번째 활발한 날**: 2026-02-09 (17개 커밋) - 통계 Strategy Pattern + 분산 락
- **활동일 수**: 6일 (2/1~2/16 기간 중)
- **평균 일일 커밋**: ~8.7개 (활동일 기준)
- **집중 작업 패턴**: 2일(02-09, 02-12)에 전체 커밋의 84.6% 집중
- **특징**: 대형 기능을 한 번에 완성하여 배포하는 "버스트(burst)" 패턴

### 주요 작업별 커밋 분포

| 주요 작업 | 커밋 수 | 비율 |
|-----------|--------|------|
| 문진표 시스템 재설계 (MPT-8995) | 26 | 50.0% |
| 비교 통계 고도화 (MPT-8953/8988) | 15 | 28.8% |
| 분산 락 인프라 (MPT-7735/8982) | 5 | 9.6% |
| QUICK 모드 (MPT-8977) | 4 | 7.7% |
| APM 최적화 + 기타 | 2 | 3.8% |

### MPT 이슈 커버리지

| 이슈 | 제목 | 커밋 수 |
|------|------|---------|
| MPT-8995 | 문진표 시스템 개선 | 26 |
| MPT-8988 | 비교 통계 API 개선 | 10 |
| MPT-8953 | 비교 통계 Strategy Pattern | 5 |
| MPT-7735 | 결제 분산 락 | 4 |
| MPT-8977 | QUICK 모드 오프라인 진료 | 4 |
| MPT-8982 | autoLogin 동시성 | 1 |
| MPT-9011 | QR 비회원 진료 리다이렉트 | 1 |

---

## Git 커밋 통계

### 전체 요약

| 항목 | 수량 |
|------|------|
| 총 커밋 수 | 52개 (백엔드 30개 + 프론트엔드 22개) + 자동화 4개 |
| 작업 레포지토리 | 2개 (+ DB 자동 동기화 1개) |
| 활동일 수 | 6일 |
| 평균 일일 커밋 | 약 8.7개 (활동일 기준) |
| 관련 MPT 이슈 | 7개 |

### 1월 vs 2월 비교

| 항목 | 1월 | 2월 | 변화 |
|------|-----|-----|------|
| 총 커밋 수 | 76개 | 52개 | -31.6% |
| 작업 레포지토리 | 5개 | 2개 | 집중화 |
| 활동일 수 | 13일 | 6일* | *2/16 기준 |
| 평균 일일 커밋 | 2.1개 | 8.7개 | +314% |
| 최다 일 커밋 | 15개 | 27개 | +80% |

*2월은 2/16 기준 중간 집계이므로 월말까지 추가 커밋 예상

---

## KPT 회고

### Keep (유지할 점)

1. **대형 기능의 체계적 설계**
   - 문진표 시스템은 Facade 패턴, Optimistic Locking, 듀얼 리드 등 여러 패턴을 적절히 조합
   - 비교 통계는 Strategy Pattern으로 확장 가능한 구조 설계
   - 설계 → 구현 → 테스트 → 문서화의 완전한 개발 사이클 수행

2. **풀스택 동시 개발**
   - 백엔드 API와 프론트엔드 UI를 함께 설계하여 인터페이스 불일치 최소화
   - Discriminated Union 타입 등 프론트엔드 타입 시스템 적극 활용

3. **테스트 및 문서화 투자**
   - 문진표 35개 단위 테스트, 분산 락 Testcontainers 통합 테스트
   - claudedocs, FE 가이드 등 팀 공유 문서 작성

4. **Claude AI 도구 활용**
   - Co-Authored-By 커밋에서 볼 수 있듯 AI 페어 프로그래밍 적극 활용
   - 복잡한 리팩토링과 테스트 코드 생성에 효과적 활용

### Problem (개선이 필요한 점)

1. **극단적 집중 패턴**
   - 6일 중 2일(02-09, 02-12)에 84.6%의 커밋 집중
   - 대형 배포 시 리뷰 부담 증가 및 잠재적 리스크
   - 일정 분산이 필요한 상황

2. **MR 프로세스 부재**
   - 직접 develop 브랜치 푸시로 코드 리뷰 기회 감소
   - 팀 내 지식 공유 및 품질 게이트 미흡

3. **활동 레포 축소**
   - 1월 5개 → 2월 2개 레포로 작업 범위 축소
   - 인프라(kube), PDF, Flutter 등 다른 영역 작업 부재

### Try (다음 달 시도할 것)

1. **커밋 일정 분산**
   - 대형 기능도 단계별로 분할하여 daily commit 유지
   - PR/MR 단위를 더 작게 가져가기

2. **MR 기반 코드 리뷰 도입**
   - feature 브랜치 → develop MR 프로세스 정착
   - 셀프 리뷰라도 MR description 작성으로 변경 사항 기록

3. **테스트 커버리지 확대**
   - 프론트엔드 테스트 비율 확대 (현재 1/22 = 4.5%)
   - 비교 통계 Strategy 클래스별 단위 테스트 보강

---

## 다음 달(3월) 계획

### 우선 진행 작업

1. **문진표 시스템 안정화**
   - 프로덕션 모니터링 및 엣지 케이스 대응
   - 추가 문진표 유형 확장 가능성 검토

2. **비교 통계 신규 메트릭 추가**
   - Strategy Pattern 기반으로 새로운 비교 메트릭 구현
   - 대시보드 UX 개선

3. **분산 락 적용 범위 확대**
   - 결제 외 동시성 이슈 있는 API 식별 및 적용
   - 모니터링 및 알림 체계 구축

### 모니터링 필요 항목

1. **문진표 Optimistic Locking 충돌율**
   - version conflict 에러 발생 빈도 추적
   - 사용자 경험 영향 분석

2. **APM 비용 절감 효과**
   - 외부 서비스 차단 후 실제 데이터 감소량 확인
   - 월간 비용 변화 추적

3. **분산 락 성능**
   - Redis 락 획득/해제 지연 시간 모니터링
   - 409 Conflict 응답 빈도 분석

---

## 결론

**2026년 2월은 아키텍처 고도화와 시스템 안정성 강화에 집중한 달입니다.**

### 주요 성과
- **52개의 Git 커밋** (백엔드 30개, 프론트엔드 22개)
- **문진표 시스템 전면 재설계** 완료 (Facade 패턴, Optimistic Locking, Discriminated Union)
- **비교 통계 Strategy Pattern** 아키텍처 구축 (6개 전략 조합 지원)
- **분산 락 인프라** 구축 (중복 결제 방지, autoLogin 동시성 해결)
- **APM 비용 최적화** (월간 35% 데이터 감소, ~$350 절감 추정)
- **7개 MPT 이슈** 처리

### 특징
- 대형 기능 2개(문진표 50%, 비교 통계 29%)에 집중한 딥 워크 패턴
- 백엔드-프론트엔드 풀스택 동시 개발 (57.7% : 42.3%)
- 디자인 패턴 적극 활용 (Facade, Strategy, Optimistic Locking, Distributed Lock)
- Claude AI Co-Authored 커밋으로 개발 생산성 극대화
- 활동일 기준 평균 8.7개 커밋의 높은 집중도

### 전망
- 3월에는 문진표 안정화 및 비교 통계 확장 예상
- 분산 락 적용 범위 확대로 시스템 전반 안정성 향상
- MR 프로세스 도입으로 코드 품질 개선 기대

---

*회고록 생성일: 2026-02-16*
*분석 대상: 2026-02-01 ~ 2026-02-16 (2월 중간 집계)*
*Git 커밋: 총 52개 (백엔드 30개, 프론트엔드 22개) + 자동화 4개 (DB 스키마 동기화)*
*필터링 기준: bahn (GitLab commit author)*
