---
title: "2025년 3월 회고록"
date: "2025-03-31"
permalink: /Retrospective/2025-03-01-2025-03-31-monthly-retrospective.html
---

# 2025년 3월 회고록

## 개요

2025년 3월에는 **30개의 Jira 이슈**와 **71개의 커밋**(BE 17개 + FE 1개 + mobidoc-pdf 22개 + kube 7개 + DB Migration 20개 + DB 스키마 4개)을 처리하며 **가예약 시스템 고도화**, **통계 데이터 인프라 구축**, **PDF 합성 서비스 신규 개발 및 Knative 배포**에 집중했습니다. 가예약 QR 접수 기능을 신규 개발하고, 병원 통계 테이블을 생성하여 데이터 기반 의사결정 기반을 마련했으며, Go 기반의 mobidoc-pdf 서비스를 처음부터 구축하고 Knative를 통해 프로덕션 환경에 배포하여 처방전 합성 기능의 기반을 마련했습니다.

| 항목 | 수량 |
|------|------|
| 완료한 이슈 | 27개 |
| 모니터링 | 3개 |
| Backend 커밋 | 17개 |
| Frontend 커밋 | 1개 |
| mobidoc-pdf 커밋 | 22개 |
| kube(인프라) 커밋 | 7개 |
| mobidoc-migration(DB) 커밋 | 20개 |
| mobidoc-database(DB 스키마) 커밋 | 4개 |
| **총 커밋** | **71개** |

## 완료한 작업

### 1. 가예약 시스템 고도화 (5개 이슈) 🔧

1월에 안정화한 가예약 시스템을 고도화하고 신규 기능을 추가했습니다.

**신규 기능 (1개):**
- 이슈 #1 (새 기능) - 환자 가예약 QR 접수 기능 추가
  - 환자가 직접 QR 코드로 가예약 접수 가능
  - 병원 데스크 부담 감소
  - 환자 셀프 접수 프로세스 구축

**버그 수정 (3개):**
- 이슈 #2 (버그) - 통합 가예약의 이름, 전화번호가 QR 신규 환자 등록 시 동일하게 사용되면 가예약이 접수됨
  - 동일 정보 사용 시 가예약 자동 접수 방지
  - 환자 구분 로직 개선

- 이슈 #3 (버그) - 환자 가예약을 포함해서 예약이 2개 이상일 경우, 환자 접수를 통해서 정보 입력 없이 가예약 접수 가능
  - 다중 예약 시 가예약 접수 프로세스 개선
  - 정보 입력 필수화

- 이슈 #4 (버그) - 환자 환자 선택이 안됨
  - 환자 선택 로직 버그 수정

**개선 (1개):**
- 이슈 #5 (개선) - 환자 환자 앱 가예약
  - 환자 앱에서 가예약 UX 개선

**영향:**
- 가예약 QR 접수로 환자 편의성 대폭 향상
- 병원 데스크 업무 부담 감소
- 가예약 프로세스 완전 안정화

### 2. 통계 데이터 인프라 구축 (4개 이슈) 📊

병원 운영 데이터 분석을 위한 통계 테이블을 구축했습니다.

**이슈:**
- 이슈 #6 (작업) - [DB] 병원 진료 통계 테이블
  - 병원별 진료 통계 데이터 집계
  - 일별/월별 통계 분석 기반 마련

- 이슈 #7 (작업) - [DB] 통계 테이블 데이터 최신화
  - 기존 통계 데이터 최신화
  - 데이터 정합성 확보

- 이슈 #8 (작업) - [DB] 2025-02-30 진료 통계 생성
  - 2월 진료 통계 데이터 생성
  - 월별 통계 리포팅 지원

- 이슈 #9 (작업) - [통합] 병원 통계 테이블 데이터 재생성
  - 통계 테이블 데이터 재생성
  - 데이터 품질 개선

**영향:**
- 병원 운영 데이터 실시간 분석 가능
- 데이터 기반 의사결정 기반 마련
- 통계 리포팅 자동화

### 3. DB 작업 및 데이터 정리 (12개 이슈) 🗄️

다양한 DB 작업으로 시스템을 최적화하고 데이터를 정리했습니다.

**DB 스키마 작업 (6개):**
- 이슈 #10 (작업) - [DB] 비급여 항목 관리 테이블
- 이슈 #11 (작업) - [DB] 비급여 항목 관리 컬럼 타입 변경
- 이슈 #12 (작업) - [DB] hospital_employee licenseNumber 추가
- 이슈 #13 (작업) - [DB] 모비닥 컨텐츠 배경색 컬럼 추가
- 이슈 #14 (작업) - [DB] 모비닥 카테고리 추가
- 이슈 #15 (작업) - [DB] 방 테이블 추가

**데이터 정리 (3개):**
- 이슈 #16 (작업) - [DB작업] 진료 mainEmployeeSeq 데이터 교정
- 이슈 #17 (작업) - [DB작업] 진료 메인직원 데이터 교정
- 이슈 #18 (작업) - [DB작업] 공적처방전달 pbp toggle 작업

**DB 최적화 (2개):**
- 이슈 #19 (작업) - [DB] 오늘 진행 중인 진료 리스트 VIEW TABLE 생성
- 이슈 #20 (작업) - [DB] 진료 프로세스 개선 이후, 미사용 테이블 삭제

**환경 데이터 (1개):**
- 이슈 #21 (작업) - [DB] 지상관측 & 대기오염 관측 지점 위치 정보 테이블 생성

**영향:**
- DB 구조 최적화 및 정리
- 데이터 정합성 강화
- 미사용 테이블 제거로 시스템 간소화

### 4. 결제 시스템 버그 수정 (1개 이슈) 💳

**이슈:**
- 이슈 #22 (버그) - 통합 진료비 결제 - 어떠한 동작으로 인해 2번 결제됨 (원인, 케이스 파악 중)
  - 2번 결제 버그 원인 파악 및 수정
  - 결제 중복 방지 로직 강화

**영향:**
- 결제 안정성 향상
- 환자 불편 해소

### 5. 환자 앱 개선 (2개 이슈) 📱

**이슈:**
- 이슈 #23 (개선) - 환자 마이 - 우측 상단 종 아이콘 - 빨간점 표시
  - 읽지 않은 알림 시각적 표시
  - 알림 확인율 향상

- 이슈 #24 (버그) - 환자 환자 선택이 안됨
  - 환자 선택 로직 버그 수정

**영향:**
- 환자 앱 UX 개선
- 알림 시스템 가시성 향상

### 6. 통합 시스템 개선 (4개 이슈) 🏥

**이슈:**
- 이슈 #25 (개선) - 통합 환자 상세: 성별 사라짐
  - 환자 상세 정보 표시 버그 수정

- 이슈 #26 (버그) - 통합 진료 예약 생성 시, 환자의 update_dtm 값이 null인 상태로 인해 프로세스 오류
  - 예약 생성 프로세스 안정화
  - null 체크 로직 추가

- 이슈 #27 (버그) - 통합 진료 기록 보내기 버그 - 환자 상세, 예약현황판 환자 카드 (진료 리스트 제외)
  - 진료 기록 전송 기능 버그 수정

- 이슈 #28 (개선) - 태블릿 진료예약 사용안해도 초기화면 표시될 수 있도록 수정
  - 태블릿 초기화면 로직 개선
  - 진료예약 미사용 병원 지원

**영향:**
- 통합 시스템 안정성 향상
- 태블릿 UX 개선

### 7. 홈페이지 개선 (1개 이슈) 🌐

**이슈:**
- 이슈 #29 (개선) - 홈페이지 홈페이지 alias
  - 홈페이지 alias 기능 개선

**영향:**
- 홈페이지 접근성 향상

### 8. DB 성능 최적화 (2개 이슈, 모니터링) 📈

**이슈:**
- 이슈 #30 (개선, 모니터링) - [DB 성능 최적화] CRM 이름 & 연락처 검색 쿼리 개선 필요
  - CRM 검색 쿼리 성능 분석
  - 최적화 방안 검토 중

- 이슈 #31 (버그, 모니터링) - [DB] hospital_patient 중복 데이터 모니터링
  - 중복 데이터 모니터링
  - 데이터 정합성 검증

**영향:**
- DB 성능 모니터링 지속
- 데이터 품질 관리

## GitLab 커밋 내역

### Backend (17개 커밋)
**레포지토리:**
- flyingdoctor-server (stag): 0개
- mobidoc-server (develop): 17개

**주요 작업:**
- 가예약 QR 접수 기능 신규 개발
- 가예약 버그 4개 수정
- 통계 테이블 구축 4개
- DB 작업 12개 (스키마, 데이터 정리, 최적화)
- 결제 2번 결제 버그 수정
- 통합 시스템 버그 4개 수정

### Frontend (1개 커밋)
**레포지토리:**
- mobidoc-front (develop): 1개
- flyingdoctor-front (develop): 0개

**작업 내용:**
- 환자 앱 알림 빨간점 표시 (추정)

### mobidoc-pdf (22개 커밋) - PDF 합성 서비스 신규 개발
**레포지토리:**
- mobidoc-file (main): 22개

**프로젝트 초기 구축 (03-07 ~ 03-19, 8개 커밋):**
- Initial commit, 프로젝트 초기화
- [mobidoc-pdf] init - Go 기반 PDF 합성 서비스 프로젝트 생성
- [mobidoc-pdf] README.md 작성
- [mobidoc-pdf] PDF & 이미지 파일 합성, 텍스트 추가 (5개 커밋) - 핵심 기능 개발

**안정화 및 예외처리 (03-20 ~ 03-25, 10개 커밋):**
- [mobidoc-pdf] PNG 파일이 아닐 경우 예외처리
- [mobidoc-pdf] 예외처리 고도화
- [mobidoc-pdf] Update README.md (2개)
- [mobidoc-pdf] Fix Error remove file (2개) - 임시 파일 삭제 오류 수정
- [mobidoc-pdf] Dockerfile - Add `/fonts` directory - 컨테이너 폰트 경로 추가
- [mobidoc-pdf][fix] Unique file name - 파일명 충돌 방지
- [mobidoc-pdf][fix] save files to temp/ (3개) - 임시 디렉토리 저장 방식 전환

**성능 최적화 (03-25 ~ 03-28, 4개 커밋):**
- [mobidoc-pdf][fix] remove files on temp/ - 임시 파일 정리 로직
- [mobidoc-pdf][fix] optimize memory heap - 메모리 힙 최적화
- [mobidoc-pdf][fix] Resize the PNG file to fit the PDF dimensions - PNG→PDF 크기 맞춤

### kube(인프라) (7개 커밋) - Knative mobidoc-pdf 배포
**레포지토리:**
- infra/kube (master): 7개

**작업 내용:**
mobidoc-pdf 서비스 개발(22개 커밋)과 연동하여 Knative 기반으로 프로덕션 환경에 배포하는 작업을 수행했습니다. 총 7회에 걸쳐 mobidoc-pdf 버전을 업데이트하며 점진적으로 배포했습니다.

| 날짜 | 커밋 메시지 | 변경 파일 |
|------|-----------|----------|
| 03-21 | [knative] Update mobidoc-pdf version | knative/yaml/mobidoc-pdf.yaml |
| 03-24 | [knative] Update mobidoc-pdf version | knative/yaml/mobidoc-pdf.yaml |
| 03-25 | [knative] Update mobidoc-pdf version (x4) | knative/yaml/mobidoc-pdf.yaml |
| 03-28 | [knative] Update mobidoc-pdf version | knative/yaml/mobidoc-pdf.yaml |

**연관 작업:** mobidoc-pdf 안정화(03-20~03-25) 및 성능 최적화(03-25~03-28) 단계에서 코드 변경 후 즉시 Knative 배포를 통해 프로덕션에 반영

### mobidoc-migration(DB 마이그레이션) (20개 커밋)
**레포지토리:**
- mobidoc-migration: 20개

**주요 작업:**
- 기상 관측소 데이터 (03-18)
- Migration Queries 추가, INDEX 최적화, Utils, RELEASE 업데이트 (03-20 x6)
- Add Merge Request Template (03-21 x12)
- Arrange Directories (03-21)

### mobidoc-database(DB 스키마) (4개 커밋)

| 날짜 | 커밋 메시지 |
|------|------------|
| 03-18 | 기상 관측소 데이터 |
| 03-20 | [20250320] MOBIDOC DATABASE SCHEMA UPDATE |
| 03-21 | Arrange Directories |
| 03-21 | Arrange Directories |

**총 커밋: 71개 (BE 17개 + FE 1개 + mobidoc-pdf 22개 + kube 7개 + DB Migration 20개 + DB 스키마 4개)**

## 주요 성과 및 인사이트

### 1. 가예약 시스템 고도화 완료
1월 안정화 → 2월 마무리 → 3월 고도화:

**신규 기능:**
- 가예약 QR 접수 기능 추가
- 환자 셀프 접수 프로세스 구축

**버그 수정 (4개):**
- QR 신규 환자 등록 시 가예약 자동 접수 방지
- 다중 예약 시 가예약 접수 프로세스 개선
- 환자 선택 로직 버그 수정

**결과:**
- 가예약 시스템 완전 고도화
- 병원 데스크 업무 부담 감소
- 환자 편의성 대폭 향상

### 2. 통계 데이터 인프라 구축
병원 운영 데이터 분석을 위한 통계 테이블 구축:
- 병원 진료 통계 테이블 생성
- 월별 진료 통계 데이터 생성
- 통계 데이터 최신화 및 재생성

**영향:**
- 데이터 기반 의사결정 기반 마련
- 병원 운영 데이터 실시간 분석 가능
- 통계 리포팅 자동화

### 3. DB 작업 집중 (12개 이슈)
3월은 DB 작업이 가장 많은 달:
- 비급여 항목 관리 테이블
- 모비닥 컨텐츠 관련 테이블
- 환경 데이터 (지상관측, 대기오염) 테이블
- 진료 메인직원 데이터 교정
- 미사용 테이블 삭제

**영향:**
- DB 구조 현대화
- 데이터 정합성 강화
- 시스템 간소화

### 4. 결제 시스템 지속 안정화
2월 MSA 분리 후 지속적인 안정화:
- 2번 결제 버그 수정
- 결제 중복 방지 로직 강화

### 5. mobidoc-pdf 서비스 신규 개발 (22개 커밋)
Go 기반의 PDF 합성 서비스(mobidoc-file 저장소)를 새롭게 구축했습니다:
- **프로젝트 초기화 및 핵심 기능 개발** (03-07 ~ 03-19): PDF & 이미지 파일 합성, 텍스트 삽입 기능
- **안정화** (03-20 ~ 03-25): 파일 타입 검증, 임시 파일 관리, Dockerfile 개선
- **성능 최적화** (03-25 ~ 03-28): 메모리 힙 최적화, PNG→PDF 크기 맞춤

**기술 스택:** Go, Docker, PDF/PNG 합성, 임시 파일 관리

### 6. 백엔드 및 인프라 중심 개발 극대화
커밋 비율이 BE+mobidoc-pdf+kube 97.9%, FE 2.1%:
- DB 작업 12개로 인프라 개선 집중
- 가예약 QR 접수 신규 개발
- 통계 테이블 구축
- mobidoc-pdf 서비스 신규 개발
- Knative 기반 mobidoc-pdf 배포 (7회)

### 6. 완료율 유지
30개 이슈 중 27개 완료 (90.0%)로 높은 완료율 유지.

## 다음 달 계획

### 주요 작업 계획
1. **DB 성능 최적화 완료**: CRM 검색 쿼리 개선 (이슈 #30)
2. **중복 데이터 정리**: hospital_patient 중복 데이터 제거 (이슈 #31)
3. **가예약 QR 접수 모니터링**: 신규 기능 안정성 확인
4. **통계 리포팅 개발**: 구축한 통계 테이블 활용
5. **비급여 항목 관리 기능 개발**: 신규 테이블 기반 기능 개발

### 기술 부채 해결
- CRM 검색 쿼리 최적화
- 중복 데이터 정리
- 레거시 코드 정리 지속

## 통계

### 이슈 유형별 분포
| 유형 | 수량 | 비율 |
|------|------|------|
| 작업 | 16개 | 53.3% |
| 개선 | 7개 | 23.3% |
| 버그 | 6개 | 20.0% |
| 새 기능 | 1개 | 3.3% |

### 완료율
- **완료**: 27개 (90.0%)
- **모니터링**: 3개 (10.0%)

### 커밋 통계
| 항목 | 수량 | 비율 |
|------|------|------|
| Backend 커밋 | 17개 | 23.9% |
| Frontend 커밋 | 1개 | 1.4% |
| mobidoc-pdf 커밋 | 22개 | 31.0% |
| kube(인프라) 커밋 | 7개 | 9.9% |
| mobidoc-migration(DB) 커밋 | 20개 | 28.2% |
| mobidoc-database(DB 스키마) 커밋 | 4개 | 5.6% |
| **총 커밋** | **71개** | **100%** |

**레포지토리별 상세:**
- flyingdoctor-server (stag): 0개
- mobidoc-server (develop): 17개
- flyingdoctor-front (develop): 0개
- mobidoc-front (develop): 1개
- mobidoc-file (main): 22개
- infra/kube (master): 7개

### 작업 분포
| 카테고리 | 이슈/커밋 수 |
|---------|--------|
| DB 작업 및 데이터 정리 | 12개 이슈 |
| 가예약 시스템 | 5개 이슈 |
| 통계 데이터 인프라 | 4개 이슈 |
| 통합 시스템 | 4개 이슈 |
| **mobidoc-pdf 신규 개발** | **22개 커밋** |
| **kube Knative 배포** | **7개 커밋** |
| DB 성능 최적화 (모니터링) | 2개 이슈 |
| 환자 앱 | 2개 이슈 |
| 결제 시스템 | 1개 이슈 |
| 홈페이지 | 1개 이슈 |

## 회고

### 잘한 점 👍
1. **가예약 시스템 고도화**:
   - QR 접수 신규 기능 개발
   - 4개 버그 수정으로 완전 안정화

2. **통계 데이터 인프라 구축**:
   - 병원 진료 통계 테이블 생성
   - 데이터 기반 의사결정 기반 마련

3. **DB 작업 집중**:
   - 12개 DB 작업으로 시스템 최적화
   - 비급여 항목, 모비닥 컨텐츠, 환경 데이터 테이블 구축

4. **높은 완료율 유지**:
   - 30개 이슈 중 27개 완료 (90.0%)

5. **데이터 정합성 강화**:
   - 진료 메인직원 데이터 교정
   - 미사용 테이블 삭제

### 개선이 필요한 점 🔧
1. **프론트엔드 작업 극소화**:
   - FE 커밋 2.1%로 역대 최저
   - BE 및 인프라 중심 개발 과도

2. **서버 커밋 수 감소 (mobidoc-pdf 별도)**:
   - 서버+FE 18개 커밋은 2월(35개) 대비 감소하나, mobidoc-pdf 22개 + kube 7개 포함 시 총 47개
   - mobidoc-pdf 신규 프로젝트 및 Knative 배포 인프라에 상당 리소스 투입

3. **DB 성능 최적화 미완료**:
   - CRM 검색 쿼리 개선 모니터링 단계
   - 중복 데이터 정리 미완료

4. **신규 기능 적음**:
   - 새 기능 1개로 매우 적음
   - 대부분 DB 작업 및 버그 수정

### 배운 점 📚
1. **가예약 시스템 3단계 진화**: 1월 안정화 → 2월 마무리 → 3월 고도화(QR 접수). 신규 시스템은 3개월 이상의 진화 과정이 필요합니다.

2. **통계 데이터의 중요성**: 통계 테이블 구축으로 병원 운영 데이터를 실시간 분석할 수 있게 되었습니다. 데이터 기반 의사결정이 가능해졌습니다.

3. **DB 작업의 집중**: 12개 DB 작업으로 시스템 인프라를 대폭 개선했습니다. 비급여 항목, 모비닥 컨텐츠, 환경 데이터 등 다양한 도메인의 테이블을 구축했습니다.

4. **결제 시스템의 복잡성**: 2월 MSA 분리 후에도 3월에 2번 결제 버그가 발견되었습니다. 결제 시스템은 지속적인 모니터링과 안정화가 필요합니다.

5. **백엔드 중심 개발의 한계**: FE 커밋 5.6%로 역대 최저를 기록했습니다. DB 작업과 인프라 개선에 집중한 결과이지만, 사용자 대면 기능 개발이 부족했습니다.

---

**작성일**: 2025년 4월 2일
