---
title: "2024년 6월 회고록"
date: "2024-06-30"
permalink: /Retrospective/2024-06-01-2024-06-30-monthly-retrospective.html
---

# 2024년 6월 개발 회고

## 📊 개요

2024년 6월은 **병원 구독 서비스 구축**과 **홈페이지 레이아웃 시스템 개발**에 집중한 달이었습니다. 총 **40개의 이슈**를 완료했으며, 특히 DB 작업(15개)과 환자앱 개선(13개)이 많았습니다. 비동기 처리 적용, 결제 프로세스 개선, EMR 연동 테이블 구축 등 시스템 전반의 안정성과 성능을 향상시켰습니다.

**주요 지표:**
- 완료 이슈: 40개
- 백엔드 커밋: 15개
- 프론트엔드 커밋: 32개
- mobidoc-helm(인프라) 커밋: 5개
- **총 커밋: 52개**

---

## ✅ 완료한 작업

### 1. 병원 구독 서비스 신규 구축 (2개 이슈)

병원이 모비닥 홈페이지를 구독하는 새로운 서비스를 구축했습니다.

- **이슈 #1**: 병원 구독 관리 TABLE 생성 (작업)
- **이슈 #2**: 관리자 & 통합 병원 구독 서비스 - 모비닥 홈페이지 (커밋)

**핵심 기능:**
- 병원별 홈페이지 구독 관리
- homepage_yn 플래그로 구독 상태 관리
- 구독 병원 조회 API

**영향:**
- 병원 맞춤형 홈페이지 서비스 제공 기반 마련
- 신규 수익 모델 기반 구축

### 2. 홈페이지 레이아웃 시스템 개발 (7개 이슈)

모비닥 홈페이지의 레이아웃 시스템을 대대적으로 개편했습니다.

- **이슈 #1**: 홈페이지 배너 테이블 생성 (작업)
- **이슈 #2**: 홈페이지 레이아웃 테이블 업데이트 (작업)
- **이슈 #3**: 홈페이지 미리보기 레이아웃 (작업)
- **이슈 #4**: 홈페이지 C타입 레이아웃 초기화 (작업)
- **이슈 #5**: 컨텐츠 테이블 업데이트 (작업)
- **이슈 #6**: 컨텐츠 그룹 - 섹션 설명 컬럼 추가 (작업)
- **이슈 #7**: 컨텐츠 태그 값 초기화 (작업)

**핵심 기능:**
- 홈페이지 배너 관리 시스템
- 레이아웃 타입별 관리 (C타입 등)
- 미리보기 기능
- 컨텐츠 그룹 및 태그 관리

**영향:**
- 병원별 맞춤형 홈페이지 제공 가능
- 컨텐츠 관리 효율성 향상
- 홈페이지 관리 자동화 기반 마련

### 3. 건강포스트 시스템 개선 (5개 이슈)

환자앱의 건강포스트 및 피드 활동 기능을 개선했습니다.

- **이슈 #1**: 병원 건강포스트 상세 - 더보기 선택 시 전체 미노출 버그 (개선)
- **이슈 #2**: 홈 - 전달받은 건강포스트 첫 진입 시 포커스 오류 (개선)
- **이슈 #3**: 전체메뉴 - 피드 활동 - 북마크 선택 시 존재하지 않는 칼럼 에러 (개선)
- **이슈 #4**: 전체 - 피드활동 - 북마크가 없는 경우 내용 변경 (개선)
- **이슈 #5**: 건강포스트 - 상세 하단 - '건강포스트'의 다른 글 미노출 (개선)

**핵심 개선:**
- 병원별 건강포스트 리스트 = 병원의 발행된 공개 건강포스트 (커밋 revert 포함)
- 북마크 기능 안정화
- 건강포스트 상세 페이지 UX 개선

**영향:**
- 건강포스트 이용률 향상
- 피드 활동 기능 안정화

### 4. 결제 프로세스 개선 (6개 이슈)

결제 실패 처리 및 재결제 프로세스를 개선했습니다.

- **이슈 #1**: 결제실패 - 재결제 프로세스 개선 (개선)
- **이슈 #2**: 결제 모달에서 등록된 결제 수단이 없을 경우 처리 (버그)
- **이슈 #3**: 결제 수단 조회 API 에러 수정 (버그)
- **이슈 #4**: 함께접수 환불 시도 시 에러 수정 (버그)
- **이슈 #5**: 통합 진료비 환불 API - price NPE 예외처리 (커밋)
- **이슈 #6**: 진료 결제 내역 - 결제 이력 모달에서 환자 정보 미노출 개선 (개선)

**핵심 개선:**
- 재결제 프로세스 UX 개선
- 환불 API 안정화
- 결제 수단 미등록 시 안내 개선

**영향:**
- 결제 실패 후 재시도 성공률 향상
- 결제 관련 CS 감소

### 5. 비동기 처리 적용 (3개 커밋)

성능 향상을 위해 주요 로직에 @Async 비동기 처리를 적용했습니다.

- **커밋 #1**: 진료신청 - 환자 알림 로직 @Async 적용
- **커밋 #2**: sendWebRequestAlarm, updatePatientAddressDefault - @Async 비동기 처리
- **커밋 #3**: 진료 신청 API - 중복 접수 방어 함수 호출 시점 조정

**핵심 개선:**
- 진료 신청 응답 속도 향상
- 알림 발송 비동기 처리로 사용자 대기 시간 감소
- 중복 접수 방어 로직 최적화

**영향:**
- 진료 신청 API 응답 시간 단축
- 사용자 경험 개선

### 6. EMR 연동 테이블 구축 (4개 이슈)

외부 병원 EMR 시스템 연동을 위한 테이블을 구축했습니다.

- **이슈 #1**: EMR 연동 테이블 수정 (작업)
- **이슈 #2**: EMR 연동 관련 테이블 변경 (작업)
- **이슈 #3**: EMR 연동 상태 및 에러메시지 컬럼 추가 (작업)
- **이슈 #4**: 환자 진행중인 당일 진료 조회 뷰 수정 (작업)

**핵심 기능:**
- EMR 연동 상태 관리
- 에러 메시지 로깅
- 환자 진행중인 진료 조회 VIEW

**영향:**
- 외부 EMR 시스템 연동 기반 마련
- 진료 데이터 동기화 안정화

### 7. 진료 신청 로직 개선 (4개 이슈)

진료 신청 프로세스의 안정성을 높였습니다.

- **이슈 #1**: 진료신청 - 신규환자(초진) 중복 접수 버그 수정 (버그)
- **이슈 #2**: 재진 환자 약관 동의 분기문 제거 (커밋)
- **이슈 #3**: saveHospitalPatient - agreeConsultTerms 주석 해제 (커밋)
- **이슈 #4**: 진료비 결제 계속 진행, 처방전 볼 수 없는 버그 수정 (버그)

**핵심 개선:**
- 초진 환자 중복 접수 방어
- 재진 환자 약관 동의 로직 단순화
- 결제 상태와 처방전 접근 권한 정확한 관리

**영향:**
- 중복 접수로 인한 혼란 방지
- 약관 동의 로직 단순화로 유지보수성 향상

### 8. 환자 정보 관리 개선 (4개 이슈)

- **이슈 #1**: 통합 & 환자 환자 개명 - 본인인증으로 정정 불가 버그 (버그)
- **이슈 #2**: 본인인증 - 기존 환자 정보와 다를 경우 업데이트 (커밋)
- **이슈 #3**: 환자 맵핑 테이블 유니크 제약 변경 (작업)
- **이슈 #4**: TNH API 호출 주소 변경 (작업)

**핵심 개선:**
- 본인인증 시 환자 정보 자동 업데이트
- 환자 개명 처리 안정화
- 외부 API 연동 주소 변경

### 9. 기타 버그 수정 및 개선 (9개 이슈)

- **이슈 #1**: 진료 예약 완료 후 백화현상 발생 버그 (버그)
- **이슈 #2**: 알림 - 결제가 취소되었어요 버튼 미작동 버그 (버그)
- **이슈 #3**: 태블릿 환자 연락처 조회 - 다른 병원 진료예약 내역까지 조회되는 현상 (버그)
- **이슈 #4**: 의사 진료시간 - 수정 후 반영 안되는 버그 (버그)
- **이슈 #5**: 병원 시간표 업데이트 - 의사 스케줄 예외처리 제거 (버그)
- **이슈 #6**: 초진문진표 앱바 상단 - 백버튼 추가 (개선)
- **이슈 #7**: 병원소식 - 타이틀 개행 or 텍스트 길이 제한 확인 (작업)
- **이슈 #8**: 진료 결제 내역 - 결제상태 텍스트 컬러 수정 요청 (작업)
- **이슈 #9**: 모비닥 서비스 소개 - 이미지 교체 (개선)

### 10. API 에러 코드 체계 개선 (1개 커밋)

- **커밋**: 모비닥 API 세부 에러 코드 추가 - ApiServiceErrorSubCode

**핵심 개선:**
- 에러 코드 세분화로 디버깅 효율성 향상
- 클라이언트에서 에러 상황별 대응 가능

---

## 🔧 GitLab 커밋 내역

### 서버 레포지토리 (15 커밋)

**1. 병원 구독 서비스 구축 (1개 커밋)**
- 관리자 & 통합 병원 구독 서비스 - 모비닥 홈페이지
- 병원 구독 관리 테이블 및 API 구현

**2. 비동기 처리 적용 (3개 커밋)**
- 진료신청 - 환자 알림 로직 @Async 적용
- sendWebRequestAlarm, updatePatientAddressDefault - @Async 비동기 처리
- 진료 신청 API - 중복 접수 방어 함수 호출 시점 조정

**3. 건강포스트 시스템 개선 (2개 커밋)**
- 환자 홈 - 병원별 건강포스트 리스트 = 병원의 발행된 공개 건강포스트 리스트
- Revert 후 재적용 (로직 검증)

**4. 재진 환자 로직 개선 (2개 커밋)**
- 진료 신청 saveHospitalPatient - 재진 환자 약관 동의 분기문 제거
- saveHospitalPatient - agreeConsultTerms 주석 해제

**5. 환자 정보 관리 개선 (1개 커밋)**
- 본인인증 - 기존 환자 정보와 다를 경우 업데이트

**6. 결제 시스템 개선 (1개 커밋)**
- 통합 진료비 환불 API - price NPE 예외처리

**7. 병원 시간표 개선 (1개 커밋)**
- 병원 시간표 업데이트 - 의사 스케줄 예외처리 제거

**8. API 에러 코드 개선 (1개 커밋)**
- 모비닥 API 세부 에러 코드 추가 - ApiServiceErrorSubCode

**9. 결제선생 연동 (2개 커밋)**
- 결제선생 가맹점 가입 - 원격진료 활성화/비활성화 시그널 메시지 전송
- ROLLBACK 후 재적용

**10. 모비닥 공지사항 개선 (1개 커밋)**
- 환자 모비닥 공지사항 리스트 API 추출 조건 추가 - type

### 프론트엔드 레포지토리 (32 커밋)

**주요 프론트엔드 개선 작업:**
- 홈페이지 레이아웃 시스템 UI 구현 (15개 커밋)
- 환자앱 건강포스트 화면 개선 (8개 커밋)
- 통합 시스템 화면 개선 (5개 커밋)
- 결제 및 진료 UI 개선 (4개 커밋)
- 프론트엔드는 기존 기능 유지

### mobidoc-helm(인프라) (5개 커밋)

Asset 서비스(asset.mobidoc.us) 인프라 구성 및 Nginx 라우팅 설정 작업을 수행했습니다.

- asset.mobidoc.us 서비스 추가 (3파일)
- front-house-call-config.yaml 수정
- values*.yaml에 asset.mobidoc.us 추가 (4파일)
- housecall.conf Nginx location /asset 라우팅 적용
- Nginx /asset → /upload/asset 경로 변경

---

## 🎯 주요 성과 및 인사이트

### 1. 병원 구독 서비스 신규 구축 🎯

병원이 모비닥 홈페이지를 구독하는 새로운 비즈니스 모델을 구축했습니다.

**핵심 기능:**
- 병원 구독 관리 테이블
- homepage_yn 플래그 관리
- 구독 병원 조회 API

**영향:**
- 신규 수익 모델 기반 마련
- 병원별 맞춤형 홈페이지 서비스 제공 가능

### 2. 홈페이지 레이아웃 시스템 대규모 개편 🏗️

모비닥 홈페이지의 레이아웃 시스템을 대대적으로 개편하여 병원별 맞춤형 페이지 제공 기반을 마련했습니다.

**주요 구축 요소:**
- 홈페이지 배너 관리 시스템
- 레이아웃 타입별 관리 (C타입 등)
- 미리보기 기능
- 컨텐츠 그룹 및 태그 관리
- 의료장비 노출 기간 관리

**영향:**
- 병원별 차별화된 홈페이지 제공
- 컨텐츠 관리 효율성 대폭 향상
- 홈페이지 관리 자동화

### 3. 비동기 처리 적용으로 성능 향상 ⚡

진료 신청 및 알림 발송 로직에 @Async 비동기 처리를 적용하여 응답 속도를 개선했습니다.

**적용 영역:**
- 진료 신청 환자 알림
- 웹 요청 알림 발송
- 환자 주소 기본값 업데이트

**영향:**
- 진료 신청 API 응답 시간 단축
- 사용자 대기 시간 감소
- 동시 접속자 처리 능력 향상

### 4. 건강포스트 시스템 안정화 📝

건강포스트 및 피드 활동 기능의 주요 버그를 수정하고 UX를 개선했습니다.

**해결한 문제:**
- 건강포스트 상세 더보기 미노출
- 북마크 기능 에러
- 건강포스트 포커스 오류
- 건강포스트 다른 글 미노출

**영향:**
- 건강포스트 이용률 향상
- 피드 활동 기능 안정화

### 5. EMR 연동 테이블 구축 완료 🏥

외부 병원 EMR 시스템 연동을 위한 테이블 구조를 완성했습니다.

**구축 요소:**
- EMR 연동 상태 관리
- 에러 메시지 로깅
- 환자 진행중인 진료 조회 VIEW
- TNH API 연동 주소 변경

**영향:**
- 외부 EMR 시스템 연동 기반 마련
- 진료 데이터 동기화 안정화

### 6. DB 작업 비중 37.5% (15개/40개) 🗄️

6월은 DB 작업이 가장 많았던 달로, 시스템 확장을 위한 기반을 다졌습니다.

**주요 DB 작업:**
- 홈페이지 레이아웃 관련 테이블 (7개)
- EMR 연동 테이블 (4개)
- 병원 구독 관리 테이블 (1개)
- 환자 맵핑 테이블 유니크 제약 변경 (1개)
- 기타 테이블 업데이트 (2개)

**전략적 의미:**
- 신규 비즈니스 모델 (병원 구독) 기반 마련
- 외부 시스템 연동 (EMR) 기반 구축
- 컨텐츠 관리 체계 고도화

### 7. 9개월 연속 백엔드 집중 (2023.10 ~ 2024.06) 🏗️

**누적 성과:**
- 공적처방전달 시스템 구축 (2023.10-12)
- 진료 프로세스 개선 (2024.01-03)
- 태블릿 접수 전면 개편 (2024.03)
- 진료 테이블 v2 마이그레이션 (2024.04)
- 결제 시스템 안정화 (2024.05)
- **병원 구독 서비스 + 홈페이지 레이아웃 시스템 구축 (2024.06)** ⭐

**효과:**
- 신규 비즈니스 모델 기반 확보
- 시스템 확장성 대폭 향상
- 외부 연동 기반 마련

---

## 📅 다음 달 계획

### 1. 병원 구독 서비스 런칭 준비

6월에 구축한 병원 구독 서비스를 실제 런칭하기 위한 준비를 진행합니다.

**주요 작업:**
- 구독 신청 프로세스 구현
- 결제 연동
- 관리자 페이지에서 구독 관리 기능 추가

### 2. 홈페이지 레이아웃 컨텐츠 채우기

구축한 홈페이지 레이아웃 시스템에 실제 컨텐츠를 채워 넣습니다.

**주요 작업:**
- 배너 컨텐츠 제작 및 등록
- 레이아웃 타입별 샘플 페이지 제작
- 미리보기 기능 테스트

### 3. 건강포스트 추천 알고리즘 개선

건강포스트 이용률을 높이기 위한 추천 알고리즘을 개발합니다.

**주요 작업:**
- 사용자 관심사 분석
- 추천 알고리즘 설계
- A/B 테스트 준비

### 4. EMR 연동 파일럿 테스트

구축한 EMR 연동 테이블을 활용한 파일럿 테스트를 진행합니다.

**주요 작업:**
- 파일럿 병원 선정
- 연동 테스트
- 에러 케이스 수집 및 개선

---

## 📈 통계

### 이슈 분류

| 분류 | 개수 | 비율 |
|------|------|------|
| 작업 | 18개 | 45.0% |
| 개선 | 12개 | 30.0% |
| 버그 | 9개 | 22.5% |
| 보류 | 1개 | 2.5% |
| **합계** | **40개** | **100%** |

### 도메인별 분류

| 도메인 | 개수 | 비율 |
|--------|------|------|
| DB | 15개 | 37.5% |
| 환자앱 | 13개 | 32.5% |
| 통합 시스템 | 8개 | 20.0% |
| 관리자 | 3개 | 7.5% |
| Batch | 1개 | 2.5% |
| **합계** | **40개** | **100%** |

### 우선순위 분석

| 우선순위 | 개수 | 설명 |
|----------|------|------|
| 높음 | 10개 | 병원 구독 서비스, 홈페이지 레이아웃, 결제 버그 |
| 중간 | 22개 | 건강포스트 개선, EMR 연동, 진료 신청 버그 |
| 낮음 | 8개 | UX 개선, 데이터 업데이트, UI 수정 |

### 커밋 통계

| 항목 | 수량 |
|------|------|
| 백엔드 커밋 | 15개 |
| 프론트엔드 커밋 | 32개 |
| mobidoc-helm(인프라) 커밋 | 5개 |
| **총 커밋** | **52개** |

### 월별 비교 (2024년 상반기)

| 월 | 이슈 | 서버 커밋 | 주요 특징 |
|----|------|-----------|-----------|
| 1월 | 30개 | 22개 | 공적처방전달 안정화 |
| 2월 | 35개 | 20개 | ConsultController 리팩토링 |
| 3월 | 45개 | 25개 | 태블릿 접수 전면 개편 |
| 4월 | 80개+ | 30개+ | 진료 테이블 v2 마이그레이션 |
| 5월 | 37개 | 18개 | 결제 시스템 안정화, 왕진 Helm Chart |
| **6월** | **40개** | **15개** | **병원 구독 + 홈페이지 레이아웃**, Asset 인프라 |

---

## 💭 회고

### 잘한 점 (Keep) ✅

1. **신규 비즈니스 모델 기반 구축**
   - 병원 구독 서비스 테이블 및 API 구현
   - 홈페이지 레이아웃 시스템 대규모 개편
   - 수익 모델 다각화 기반 마련

2. **비동기 처리 적용으로 성능 향상**
   - 진료 신청 알림 로직 @Async 적용
   - 웹 요청 알림 비동기 처리
   - 응답 속도 개선

3. **DB 작업 집중으로 시스템 확장성 확보**
   - 홈페이지 레이아웃 관련 테이블 7개 구축
   - EMR 연동 테이블 4개 구축
   - 병원 구독 관리 테이블 생성

4. **건강포스트 시스템 안정화**
   - 주요 버그 5개 수정
   - UX 개선
   - 북마크 기능 안정화

### 개선할 점 (Problem) 🔧

1. **작업 이슈 비중 높음 (45.0%)**
   - DB 작업이 많아 개발 이슈 비중 높음
   - 버그 비율은 낮았으나 (22.5%) 작업 이슈 관리 필요

2. **건강포스트 로직 revert 발생**
   - 병원별 건강포스트 리스트 로직을 revert 후 재적용
   - 충분한 테스트 부족
   - 스테이징 환경 검증 필요

3. **결제선생 연동 ROLLBACK 발생**
   - 원격진료 활성화/비활성화 시그널 메시지 전송을 ROLLBACK 후 재적용
   - 외부 연동 테스트 프로세스 보완 필요

4. **EMR 연동 테이블 여러 차례 수정**
   - EMR 연동 테이블을 3차례 수정
   - 초기 요구사항 분석 부족

### 시도할 점 (Try) 🚀

1. **스테이징 환경 검증 강화**
   - 프로덕션 배포 전 스테이징 환경에서 충분한 테스트
   - 주요 flow에 대한 통합 테스트 시나리오 작성
   - revert 빈도 감소

2. **외부 연동 테스트 프로세스 구축**
   - 결제선생, EMR 등 외부 연동 시 테스트 환경 구축
   - 외부 API 모킹 도구 도입
   - 연동 실패 시나리오 테스트

3. **DB 스키마 변경 시 초기 요구사항 분석 강화**
   - DB 스키마 변경 전 요구사항 문서화
   - 이해관계자와 충분한 논의
   - 스키마 변경 이력 관리

4. **병원 구독 서비스 런칭 준비**
   - 결제 연동 (구독료 결제)
   - 구독 신청 프로세스 구현
   - 관리자 페이지에서 구독 관리 기능

---

## 🏆 주요 키워드

`#병원구독서비스` `#홈페이지레이아웃시스템` `#비동기처리` `#건강포스트안정화` `#EMR연동` `#DB작업집중` `#신규비즈니스모델` `#성능최적화` `#9개월백엔드집중` `#시스템확장성`
