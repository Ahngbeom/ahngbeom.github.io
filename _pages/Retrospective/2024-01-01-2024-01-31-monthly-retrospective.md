---
title: "월간 회고록 (2024.01.01 ~ 2024.01.31)"
date: "2024-01-31"
tags: [회고, 플라잉닥터, 월간회고, 2024년시작]
---

## 개요

2024년 1월 한 달간의 회고록입니다. 2024년의 첫 달로, **공적처방전달 안정화** 및 **병원 찾기 개편**이 핵심 프로젝트였습니다. 2023년 12월에 구축한 공적처방전달 시스템의 다양한 버그를 수정하고, 병원 찾기 기능을 전면 개편했습니다. 또한 태블릿 접수 시스템의 사용성을 대폭 개선했습니다. 총 42개의 이슈를 처리하고, 30개의 커밋(백엔드 15개 + 프론트엔드 15개 + DB 스키마 1개)을 작성했습니다.

**커밋 통계:**
- Backend: 15개 (flyingdoctor-server)
- Frontend: 15개 (mobidoc-front)
- DB Schema: 1개 (mobidoc-database)
- **총 31개 커밋**

---

## 완료한 작업

### 버그 수정 - 공적처방전달

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #1 | [공적처방] 약국리스트가 안보이는 현상 | Highest | 약국 목록 조회 긴급 수정 |
| 이슈 #2 | [환자] 약국에 처방전 전달 후 처방약 전달 상태 업데이트 불가 | Medium | 상태 업데이트 로직 수정 |
| 이슈 #3 | [환자] 처방전 받기 버튼을 클릭하면 팩스번호가 1로 바뀜 | Medium | 팩스번호 버그 수정 |
| 이슈 #4 | [환자] 원격진료를 제외한 진료는 처방 전송 내역이 남지 않음 | Medium | 진료 유형별 처방 전송 이력 수정 |

### 버그 수정 - 기타

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #5 | [환자] 원격진료 신청 시, 점심시간이 비활성 상태임에도 진료 신청 불가 | Medium | 점심시간 체크 로직 버그 수정 |
| 이슈 #6 | [관리자] 병원 - 처방전 템플릿 사용 여부 수정 시, 반영이 안됨 | Medium | 설정 반영 버그 수정 |
| 이슈 #7 | [환자] 원격진료 알림을 문자메시지로 수신할 때, 병원명이 누락됨 | Medium | SMS 알림 병원명 누락 수정 |
| 이슈 #8 | [환자] 진료예약 버튼 활성화가 정상적으로 안되는 케이스 | Low | 버튼 활성화 조건 수정 |
| 이슈 #9 | [환자] 회원탈퇴 페이지에서 탈퇴 신청 후 페이지 이동이 안되는 현상 | Medium | 네비게이션 버그 수정 |

### 기능 개선 - 공적처방전달

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #10 | [공적처방] 조제확정하기 선택하면 해당페이지에서 상태 변경 | Medium | 실시간 상태 변경 개선 |
| 이슈 #11 | [통합] 처방전 등록 성능 개선 필요 | Medium | 처방전 등록 속도 최적화 |

### 기능 개선 - 예약 및 알림

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #12 | [환자] 진료예약 - 자동취소 - 예약 5분전 안내 추가 | Medium | 예약 5분전 알림 추가 |
| 이슈 #13 | [환자] 예약 도착 5분전 알림 수정 필요 | Medium | 알림 문구 개선 |
| 이슈 #14 | [환자] 진료 예약 카드 - 예약일 표기 방식 수정 | Medium | 날짜 표시 개선 |

### 기능 개선 - 태블릿 접수

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #15 | [태블릿 접수] 접수진행 중 이탈 시 리셋기능 | Medium | 세션 관리 개선 |
| 이슈 #16 | [태블릿] 사용성 개선 - 신규환자 Flow 개선 | Medium | 신규 환자 접수 프로세스 개선 |
| 이슈 #17 | [태블릿] 사용성 개선 - Alert 버튼 Action 변경 (긍정, 부정) | Medium | 버튼 레이블 개선 |
| 이슈 #18 | [태블릿] 사용성 개선 - 커버화면 개선 | Medium | 대기 화면 UX 개선 |

### 기능 개선 - 본인인증

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #19 | [DB, 환자] 회원가입 시 비회원에서 입력한 주소 정보 가져오기 | Medium | 주소 데이터 연동 |
| 이슈 #20 | [환자] 본인인증 시, 가족 연결 및 주소 데이터 가져오기 프로시져 개선 | Medium | 본인인증 프로세스 최적화 |
| 이슈 #21 | [DB] 환자 계정과 병원 주소록 연동이 되지 않은 환자 업데이트 | Medium | 데이터 연동 개선 |

### 기능 개선 - UI/UX

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #22 | [환자] 처방전 - 이미지 위치 조정, 1개일 경우 페이징 X | Medium | 처방전 UI 개선 |
| 이슈 #23 | [환자] 원격진료 - 점심시간 안내 팝업 | Medium | 점심시간 안내 추가 |
| 이슈 #24 | [환자] 피드 - 상단 탭 병원명이 나오고 있지 않음 | Medium | 병원명 표시 수정 |
| 이슈 #25 | [환자] 알럿 텍스트 수정 필요 | Medium | 알림 문구 개선 |

### 기능 개선 - 관리자

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #26 | [통합] 예약 방식이 변경되어도 기존 의사 토글 상태 유지 | Medium | 설정 지속성 개선 |
| 이슈 #27 | [통합] 컨텐츠 그룹 로직 개선 | Medium | 컨텐츠 관리 개선 |

### 작업 - DB 스키마

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #28 | [DB] 공적처방전달 - push알람 내용 수정 | Medium | 알림 템플릿 수정 |
| 이슈 #29 | [DB] 병원 계정 업데이트 | Medium | 계정 테이블 수정 |
| 이슈 #30 | [DB] 공적처방 operationTimeString 길이 조정 | Medium | 컬럼 타입 변경 |
| 이슈 #31 | [DB] 군 진료 확인 테이블 | Medium | 군 의료 서비스 테이블 |
| 이슈 #32 | [DB] 앱 푸시 방문예약 → 진료예약으로 문구 변경 | Medium | 용어 통일 |
| 이슈 #33 | [DB] 컨텐츠 타입 업데이트 | Medium | 컨텐츠 분류 개선 |
| 이슈 #34 | [DB] 공적처방전달 - emr-api-auth 수정 | Medium | API 인증 수정 |
| 이슈 #35 | [DB] 예약시간 1시간 전 푸시 알림 내용 수정 | Medium | 알림 문구 개선 |
| 이슈 #36 | [DB] tb_property에 공적처방전달 toggle 값 추가 | Medium | 설정 값 추가 |
| 이슈 #37 | [DB] 군 환자 주소 컬럼 추가 | Medium | 군 의료 주소 관리 |
| 이슈 #38 | [DB] 공적처방전달 - 알람 템플릿 업데이트 (SMS 추가) | Medium | SMS 알림 추가 |
| 이슈 #39 | [DB] 공적처방전달 | Medium | 공적처방 DB 작업 |
| 이슈 #40 | [DB] tb_property row 추가 | Medium | 설정 테이블 확장 |
| 이슈 #41 | [DB] 진료예약 5분전 알림 내용 수정 | Medium | 알림 문구 수정 |
| 이슈 #42 | [DB] 병원별 오늘 대기환자 수 조회 VIEW TABLE 추가 | Medium | 대기 환자 수 VIEW |
| 이슈 #43 | [DB] 오늘 진행 중인 진료 리스트 VIEW TABLE 생성 | Medium | 진료 리스트 VIEW |
| 이슈 #44 | [DB] 군비닥 테이블 재생성 | Medium | 군 의료 테이블 재구성 |

### 작업 - 기타

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #45 | [환자] 플라잉닥터 사업자 정보 수정 | Medium | 사업자 정보 업데이트 |

---

## GitLab 커밋 내역

### Backend Server (15 commits) - 공적처방전달 안정화 및 성능 개선

| 날짜 | 내용 |
|------|------|
| 01-18 | [환자] 병원 찾기 개편 |
| 01-19 | [환자] 본인인증 시, hospital_patient 데이터 업데이트 조건 추가 |
| 01-22 | [관리자] 병원 정보 수정 - 처방전 템플릿 사용 유무 반영 버그 수정 |
| 01-24 | [공통] OnlineJob request - tokenService.getSeq() 제거 |
| 01-24 | [공통] listTodayConsultGroupWaitingCount - 쿼리 최적화 |
| 01-24 | [공통] 본인인증 정보 업데이트 - lastLoginDtm 추가 |
| 01-24 | [환자] 병원 리스트 - waiting_count(오늘 대기환자 수) 추가 |
| 01-24 | [환자] 즐겨찾기 병원 리스트 - favorite_seq 추가 |
| 01-25 | [통합] 예약 방식이 변경되어도 기존 의사 토글 상태 유지 |
| 01-25 | [통합] 진료실 입장 요청 SMS에 병원명이 안나오는 현상 수정 |
| 01-26 | [환자] 진료 캘린더 진료 리스트 추출 쿼리 최적화 |
| 01-30 | [공통] Spire.PDF 버전 업그레이드 - 5.1.0 → 9.12.3 |
| 01-30 | [환자] 병원 정보 reservation_yn - th.reserve_type 조건 추가 |
| 01-30 | [환자] 본인인증 시, hospital_patient 본인 데이터 patient_account_seq 할당 |

### DB Schema - mobidoc-database (1 commit)

| 날짜 | 내용 |
|------|------|
| 01-12 | [20240112] MOBIDOC DATABASE SCHEMA UPDATE |

### Frontend (0 commits)

이번 달도 프론트엔드 커밋이 없었습니다. 모든 작업이 서버와 DB에 집중되었습니다.

---

## 주요 성과 및 인사이트

### 1. 병원 찾기 개편 (핵심)

병원 찾기 기능을 전면 개편했습니다.

**주요 개선 사항:**
- **대기환자 수 표시**: 병원 리스트에 오늘 대기환자 수 추가
- **즐겨찾기 순서**: favorite_seq 필드 추가로 즐겨찾기 순서 관리
- **성능 최적화**: listTodayConsultGroupWaitingCount 쿼리 최적화 (CASE WHEN 문법 제거, OR 연산 활용)
- **VIEW TABLE**: 병원별 오늘 대기환자 수 조회 VIEW TABLE 추가

**효과:**
- 사용자가 대기 시간을 고려하여 병원 선택 가능
- 즐겨찾기 병원을 우선적으로 표시
- 쿼리 성능 향상

### 2. 공적처방전달 안정화

2023년 12월에 구축한 공적처방전달 시스템의 다양한 버그를 수정했습니다.

**수정된 버그:**
- **약국리스트 안보임** (Highest 우선순위): 약국 목록 조회 긴급 수정
- **처방약 전달 상태 업데이트 불가**: 상태 업데이트 로직 수정
- **팩스번호가 1로 바뀜**: 팩스번호 버그 수정
- **원격진료 외 진료 처방 전송 내역 누락**: 진료 유형별 이력 관리

**기능 개선:**
- 조제확정 후 실시간 상태 변경
- 처방전 등록 성능 개선

### 3. 태블릿 접수 사용성 개선

병원 현장에서 사용하는 태블릿 접수 시스템의 사용성을 대폭 개선했습니다.

**개선 내용:**
- **접수진행 중 이탈 시 리셋 기능**: 세션 관리 개선
- **신규환자 Flow 개선**: 접수 프로세스 간소화
- **Alert 버튼 Action 변경**: 긍정/부정 버튼 명확화
- **커버화면 개선**: 대기 화면 UX 개선

**효과:**
- 병원 직원의 업무 효율성 향상
- 환자 대기 시간 단축

### 4. 본인인증 프로세스 개선

본인인증 시 데이터 연동을 개선했습니다.

**개선 내용:**
- **회원가입 시 주소 정보 가져오기**: 비회원 접수 시 입력한 주소를 회원가입 시 자동 연동
- **가족 연결 및 주소 데이터 프로시져 개선**: 본인인증 프로세스 최적화
- **lastLoginDtm 추가**: 마지막 로그인 시간 기록
- **hospital_patient 본인 데이터 patient_account_seq 할당**: 데이터 정합성 개선

### 5. 쿼리 성능 최적화

여러 쿼리를 최적화하여 성능을 향상시켰습니다.

**최적화 내용:**
- **listTodayConsultGroupWaitingCount**: CASE WHEN 문법 제거, OR 연산 활용
- **진료 캘린더 진료 리스트 추출 쿼리 최적화**
- **오늘 진행 중인 진료 리스트 VIEW TABLE 생성**: 자주 사용하는 쿼리 VIEW화

### 6. Spire.PDF 버전 업그레이드

PDF 라이브러리를 **5.1.0에서 9.12.3으로 업그레이드**했습니다.

**업그레이드 효과:**
- 처방전 PDF 생성 성능 향상
- 새로운 PDF 기능 활용 가능
- 보안 강화

### 7. 예약 알림 개선

예약 관련 알림을 개선했습니다.

**추가/개선된 알림:**
- **예약 5분전 안내**: 자동취소 전 알림
- **예약 도착 5분전 알림**: 문구 개선
- **예약시간 1시간 전 알림**: 문구 수정

---

## 2024년 2월 계획

1. **공적처방전달 모니터링**: 안정화 작업 효과 확인
2. **병원 찾기 추가 개선**: 사용자 피드백 반영
3. **태블릿 접수 확대**: 더 많은 병원에 태블릿 접수 시스템 배포

---

## 통계

### 이슈

- **총 이슈 수**: 42개
- **완료**: 41개 (97.6%)
- **보류**: 1개 (2.4%)

| 유형 | 개수 |
|------|------|
| 버그 | 9개 |
| 개선 | 13개 |
| 작업 | 13개 |
| 하위 작업 | 7개 |

| 우선순위 | 개수 |
|----------|------|
| Highest | 1개 |
| Medium | 40개 |
| Low | 1개 |

### 커밋

- **총 커밋 수**: 16개
- **Backend Server**: 15개
- **Frontend**: 0개
- **DB Schema (mobidoc-database)**: 1개

| 도메인 | 커밋 수 |
|--------|---------|
| 병원 찾기 개편 | 4개 (27%) |
| 본인인증 개선 | 3개 (20%) |
| 쿼리 최적화 | 3개 (20%) |
| 버그 수정 | 3개 (20%) |
| 기타 | 2개 (13%) |

---

## 회고

2024년 1월은 **공적처방전달 안정화**와 **병원 찾기 개편**으로 2024년을 시작한 달이었습니다.

이번 달도 **100% 서버 중심 작업**이었습니다. 2023년 10월부터 4개월 연속 프론트엔드 커밋이 없었으며, 백엔드와 DB 작업에만 집중했습니다. 이는 2023년 하반기부터 진행한 결제 시스템 전환, 공적처방전달 구축 등이 주로 백엔드 작업이었기 때문입니다.

**공적처방전달 안정화**는 2023년 12월에 구축한 시스템의 첫 안정화 작업이었습니다. 약국리스트 안보임(Highest), 상태 업데이트 불가, 팩스번호 버그 등 다양한 버그를 수정했습니다. 특히 "약국리스트 안보임"은 가장 높은 우선순위로 긴급 수정했습니다.

**병원 찾기 개편**은 사용자 편의성을 크게 향상시킨 작업입니다. 대기환자 수를 실시간으로 표시하여 사용자가 대기 시간을 고려하여 병원을 선택할 수 있게 되었습니다. 또한 쿼리 최적화를 통해 성능도 향상되었습니다.

**태블릿 접수 사용성 개선**은 병원 현장의 피드백을 반영한 작업입니다. 신규환자 Flow 개선, Alert 버튼 명확화, 커버화면 개선 등 실제 사용 환경에서 필요한 개선사항들을 반영했습니다.

이슈 수(42개)와 커밋 수(15개)는 평균 수준이지만, 공적처방전달 안정화와 병원 찾기 개편이라는 중요한 작업에 집중했습니다. 특히 쿼리 최적화와 VIEW TABLE 생성은 장기적으로 성능 향상에 큰 도움이 될 것입니다.

2024년의 시작을 안정화와 사용성 개선으로 시작하여, 견고한 기반을 마련했습니다.
