---
title: "월간 회고록 (2023.09.01 ~ 2023.09.30)"
date: "2023-09-30"
tags: [회고, 플라잉닥터, 월간회고]
---

## 개요

2023년 9월 한 달간의 회고록입니다. 이 달의 핵심 프로젝트는 **결제 프로세스 변경** 및 **병원 시간표 안정화**였습니다. 기존 페이플에서 결제선생으로 결제 시스템을 전환하고, 8월에 개발한 병원 시간표 개선을 안정화했습니다. 총 35개의 이슈를 처리하고, 26개의 커밋(서버 20개 + 프론트 6개)을 작성했습니다.

---

## 완료한 작업

### 에픽 - 결제 프로세스 변경

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #1 | [환자, 통합] 결제프로세스 변경 (페이플 → 결제선생) | Medium | 결제 시스템 전환 에픽 |
| 이슈 #2 | [환자, 통합] 결제선생 API 연동 개발 | Medium | 결제선생 API 연동 |
| 이슈 #3 | [환자, 통합] 프로세스 변경 (진료 프로세스에서 결제 프로세스 분리) | Medium | 결제 프로세스 독립화 |

### 새 기능 개발

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #4 | [통합] 주소 보이는 로직 확인 필요 | Medium | 주소 표시 로직 신규 개발 |

### 버그 수정

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #5 | [환자] 비회원 WEB 진료신청서 휴대폰번호가 서버로 전송안되는 현상 | Medium | 비회원 휴대폰번호 전송 오류 수정 |
| 이슈 #6 | [환자] 진료신청서 C.C Modal - 병원 설정 문구 미적용 문제 | Medium | C.C Modal 문구 적용 오류 수정 |
| 이슈 #7 | [통합, 환자] 병원 진료 시간 안내가 의사 진료 시간과 상이함 | Medium | 시간표 불일치 수정 |
| 이슈 #8 | [관리자] admin - 병원 페이지 금주 날짜 표시 미업데이트 | Medium | 날짜 표시 버그 수정 |

### 기능 개선 - 병원 시간표 관련

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #9 | [환자] 병원/의사 소개 - 진료시간안내 수정 | Medium | 진료 시간 표시 개선 |
| 이슈 #10 | [통합] 의사 진료 요일을 추가했으나 해당 요일이 반영되지 않음 | Medium | 의사 스케줄 반영 로직 수정 |

### 기능 개선 - 알림 관련

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #11 | [환자] 알림 - 진료실 입장/처방전 도착 안내 수정 | Medium | 알림 문구에 병원명 추가 |
| 이슈 #12 | [환자] 직접방문 QR 접수 - 앱 홈상단 알림카드 추가 | Medium | 직접방문 알림카드 신규 추가 |
| 이슈 #13 | [환자] 홈상단 알림카드 - 직접방문 QR 접수 시 병원 등록 전 가이드 | Medium | 가이드 카드 추가 |

### 기능 개선 - UI/UX

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #14 | [환자] 전체 - '상담하기' 메뉴명 변경: 모비닥 이용 문의 | Low | 메뉴명 변경 |
| 이슈 #15 | [환자] 등록한 카드 가이드 변경 | Medium | 결제 카드 가이드 개선 |
| 이슈 #16 | [환자] 병원홈페이지 - 병원소식 없는 경우 비노출 | Medium | 빈 데이터 처리 개선 |
| 이슈 #17 | [환자] 진료일정 - 텍스트 컬러 수정 | Medium | UI 색상 개선 |
| 이슈 #18 | [환자] 피드활동 - 전달받은 피드 - 병원별 필터 추가 | Medium | 필터 기능 확장 |
| 이슈 #19 | [환자] 진료내역, 피드활동 - 필터 가이드 확인 | Medium | 필터 가이드 개선 |
| 이슈 #20 | [통합] 수정 - 방문예약 Switch Hover 시 Tooltip 호출 조건 수정 | Medium | 툴팁 표시 조건 개선 |

### 기능 개선 - 환자 데이터

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #21 | [환자, 통합] 환자 데이터 INSERT 시 환자 이름 공백 제거 | High | 데이터 정합성 개선 (TRIM) |
| 이슈 #22 | [환자] 가족계정이 QR 접수 시 본 계정의 원격진료 신청 D-날짜 변경 | Medium | 가족계정 로직 수정 |
| 이슈 #23 | [환자] 가족등록 시 비회원에서 등록한 가족과 연결 | Medium | 가족 연결 로직 개선 |

### 기능 개선 - 기타

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #24 | [통합] 예약&진료조회 - 명칭 통일 | Medium | 용어 일관성 확보 |
| 이슈 #25 | [통합] 병원 alias 입력 | Medium | 병원 별칭 기능 |
| 이슈 #26 | [환자] nuxt3 작업 | Medium | 프론트엔드 프레임워크 업그레이드 착수 |

### 작업 - DB 스키마

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #27 | [DB] tb_hospital.status default 값 변경 | Medium | 기본값 수정 |
| 이슈 #28 | [DB] tb_alarm_patient_template - 처방전 전달 완료 알림 수정 | Medium | 알림 템플릿 수정 |
| 이슈 #29 | [DB] tb_hospital - 병원 QR 유형 컬럼 추가 | Medium | QR 유형 구분 컬럼 추가 |
| 이슈 #30 | [DB] tb_alarm_patient_template - 진료실 입장 요청 알림 수정 | Medium | 알림 템플릿 수정 |
| 이슈 #31 | [환자] 약관 관련 스키마 작업 | Medium | 약관 테이블 업데이트 |
| 이슈 #32 | [DB] CRM 업데이트 및 마이그레이션 | Medium | CRM 데이터 마이그레이션 |
| 이슈 #33 | [DB] 삭제된 피드에 대한 피드그룹할당 제거 | Medium | 데이터 정리 |
| 이슈 #34 | [DB] 병원 공지 테이블 업데이트 | Medium | 공지 테이블 구조 변경 |
| 이슈 #35 | [DB] tb_feed_send_group_assign 테이블 업데이트 | Medium | 피드 그룹 테이블 업데이트 |

---

## GitLab 커밋 내역

### Backend Server (20 commits) - 병원 시간표 안정화 및 알림 개선

| 날짜 | 내용 |
|------|------|
| 09-06 | [공통] insertHospitalOpTimeList - 병원 시간표 날짜 삽입 로직 개선 |
| 09-06 | [공통] insertHospitalOpTimeList - 병원 시간표 날짜 삽입 로직 추가 |
| 09-06 | [공통] insertHospitalOpTimeList - 진료시간표 요일 코드 추가 & 점심시간 데이터 할당 로직 수정 |
| 09-06 | [공통] listDoctorSchedule - holiday_label 필드 추가 |
| 09-07 | [통합, 공통] /holiday API 추가 - 공휴일 목록 추출 |
| 09-08 | [통합] 처방전 전달 및 결제 완료 알림 - 병원명 추가 |
| 09-09 | [통합] 원격 진료 진료실 입장 요청 알림 - 병원명 추가 |
| 09-12 | [Batch] 병원 시간표 = 의사 스케줄 SUM - customJobLauncher 수정 |
| 09-13 | [전체] 병원 시간표 = 의사 스케줄 SUM - ElasticSearch logging |
| 09-13 | [전체] 병원 시간표 = 의사 스케줄 SUM - 의사 특정 날짜 스케줄 변경 시 병원 시간표 NOT UPDATE |
| 09-13 | [환자] /consult-group/end API - statusList 수정 |
| 09-17 | [Batch, 공통] 병원 시간표 일요일 정기 업데이트 로직 수정 |
| 09-17 | [TEST] 병원 시간표 일요일 정기 업데이트 - 강제 업데이트 |
| 09-18 | [공통] 환자 정보 INSERT - 환자명, 연락처 공백 제거 (TRIM) |
| 09-24 | [공통] findHospital, findDoctorForPatient - 주간 시간표 시작 기준 요일(일요일) 수정 및 정렬 |
| 09-24 | [통합, Batch] 병원 시간표 업데이트 - 진료 시간 값 유효성 검사 예외처리 |

### Frontend (20 commits) - 진료신청서 수정 및 UI 개선

| 날짜 | 내용 |
|------|------|
| 09-01 | [환자] 비회원 WEB 진료신청서 - 휴대폰번호가 서버로 전송되지 않는 현상 수정 |
| 09-01 | [환자] 진료신청서 C.C Modal - 병원 설정 문구 미적용 문제 수정 |
| 09-05 | [환자] 비회원 WEB 진료신청서 - 주소 데이터 없는 환자 예외처리 |
| 09-06 | [환자] 병원 시간표 = 의사 스케줄 SUM - 병원 점심시간 추출 로직 수정 |
| 09-07 | [환자] 공휴일 표시 로직 수정 및 개선 |
| 09-07 | [환자] 전체 메뉴 - 상담하기 → 모비닥 이용 문의 |
| 09-11 | [환자] 홈 상단 Swiper Card - 직접방문 카드 추가 |
| 09-13 | [환자] HospitalAlarmBox - endConsultList 진료상태값 리스트 추가 |
| 09-13 | [환자] checkHospitalDeadline - 오전 마감 예외 처리 로직 수정 |
| 09-13 | [환자] 병원 상세 - 병원 소식이 없는 경우 소식 탭 숨김 처리 |
| 09-15 | [환자] ConsultCRMCard - 바로접수/직접방문 접수 전 대기인원 숨김 처리 |
| 09-15 | [환자] OperationTime - 텍스트 컬러 변경 |
| 09-18 | [환자, 피드] env 수정 - 개발 서버 URL 변경 |
| 09-18 | [환자] 전체메뉴 - 피드 활동 - 전달받은 피드 병원별 필터 기능 추가 |
| 09-24 | [환자] 병원, 의사 상세 - 주간 시간표 시작 기준 요일(일요일) 수정 |
| 09-25 | [환자] 병원 상세 - enableYn console error 수정 |
| 09-26 | [환자] 진료 신청서 - 가족 추가 API 호출 후 병원 초진/재진 여부 처리 |

---

## 주요 성과 및 인사이트

### 1. 결제 프로세스 변경 (에픽)

기존 **페이플**에서 **결제선생(Paymint)**으로 결제 시스템을 전환하는 대규모 작업을 수행했습니다.

**주요 변경 사항:**
- 결제선생 API 연동 개발
- 진료 프로세스에서 결제 프로세스 분리 (독립화)
- 등록한 카드 가이드 UI 변경

**기대 효과:**
- 결제 안정성 향상
- 결제 프로세스 독립화로 유지보수 용이성 증가
- 향후 다양한 결제 수단 확장 가능

### 2. 병원 시간표 안정화 (8월 개발 후속)

8월에 개발한 **병원 시간표 = 의사 스케줄 SUM** 방식을 안정화했습니다.

**안정화 작업:**
- 병원 시간표 일요일 정기 업데이트 로직 수정
- 의사 특정 날짜 스케줄 변경 시 병원 시간표 업데이트 조건 개선
- 진료 시간 값 유효성 검사 예외처리
- 주간 시간표 시작 기준 요일(일요일) 수정 및 정렬
- ElasticSearch 로깅 추가

**테스트 작업:**
- 병원 시간표 일요일 정기 업데이트 강제 테스트

### 3. 알림 개선 - 병원명 추가 (이슈 #11)

진료실 입장 요청 알림과 처방전 전달 완료 알림에 **병원명**을 추가하여 사용자가 어느 병원의 알림인지 명확하게 인지할 수 있도록 개선했습니다.

### 4. 환자 데이터 정합성 개선 (이슈 #21)

환자 정보 INSERT 시 **환자명과 연락처의 공백을 제거(TRIM)**하도록 개선했습니다. 이를 통해 데이터 중복이나 검색 오류를 방지할 수 있습니다.

### 5. 공휴일 API 추가 (신규)

공휴일 목록을 추출하는 **/holiday API**를 신규 개발했습니다. 이 API는 병원 시간표에서 공휴일 표시, 진료 가능 여부 판단 등에 활용됩니다.

### 6. 직접방문 QR 접수 홈카드 (이슈 #12, #13)

직접방문 QR 접수 사용자를 위한 **홈 상단 알림카드**를 추가했습니다:
- 직접방문 Swiper Card 추가
- 병원 등록 전 가이드 카드 추가

### 7. Nuxt3 작업 착수 (이슈 #26)

프론트엔드 프레임워크를 **Nuxt3**로 업그레이드하는 작업에 착수했습니다. 이는 장기적인 기술 부채 해소와 성능 개선을 위한 작업입니다.

---

## 2023년 10월 계획

1. **결제선생 연동 완료**: 결제 프로세스 전면 적용 및 안정화
2. **병원 시간표 모니터링**: 배치 작업 안정성 확인
3. **Nuxt3 마이그레이션 진행**: 프론트엔드 프레임워크 업그레이드 계속

---

## 통계

### 이슈

- **총 이슈 수**: 35개
- **완료**: 35개 (100%)

| 유형 | 개수 |
|------|------|
| 에픽 | 1개 |
| 새 기능 | 1개 |
| 버그 | 4개 |
| 개선 | 19개 |
| 작업 | 2개 |
| 하위 작업 | 8개 |

| 우선순위 | 개수 |
|----------|------|
| High | 1개 |
| Medium | 33개 |
| Low | 1개 |

### 커밋

- **총 커밋 수**: 40개
- **Backend Server**: 20개
- **Frontend**: 20개

| 도메인 | 커밋 수 |
|--------|---------|
| 병원 시간표 안정화 | 15개 (38%) |
| 진료신청서/알림 | 12개 |
| UI 개선 | 8개 |
| 기타/Merge | 5개 |

---

## 회고

2023년 9월은 **결제 시스템 전환**과 **병원 시간표 안정화**라는 두 가지 중요한 과제에 집중한 달이었습니다.

**결제 프로세스 변경**은 페이플에서 결제선생으로 전환하는 대규모 작업이었습니다. 특히 진료 프로세스에서 결제 프로세스를 분리하여 독립적인 모듈로 만든 것이 큰 성과입니다. 이를 통해 향후 결제 관련 변경이 진료 프로세스에 영향을 주지 않게 되었습니다.

**병원 시간표 안정화**는 8월에 개발한 "의사 스케줄 SUM" 방식의 병원 시간표를 실제 운영 환경에서 안정적으로 동작하도록 개선한 작업입니다. 일요일 정기 업데이트, 의사 스케줄 변경 시 병원 시간표 업데이트 조건, 예외처리 등 다양한 엣지 케이스를 처리했습니다.

이번 달 커밋 수(40개)는 이전 달(80개)에 비해 절반으로 줄었지만, 이는 새로운 기능 개발보다 **기존 기능의 안정화와 최적화**에 집중했기 때문입니다. 안정화 작업은 눈에 잘 띄지 않지만, 서비스 품질을 높이는 데 필수적인 작업입니다.

또한 **Nuxt3 마이그레이션**에 착수한 것은 장기적인 관점에서 중요한 결정입니다. 프론트엔드 프레임워크 업그레이드는 성능 개선, 개발 생산성 향상, 최신 기술 스택 적용 등 다양한 이점을 가져올 것입니다.
