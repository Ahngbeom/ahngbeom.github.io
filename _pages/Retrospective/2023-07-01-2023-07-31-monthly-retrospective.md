---
title: "월간 회고록 (2023.07.01 ~ 2023.07.31)"
date: "2023-07-31"
tags: [회고, 플라잉닥터, 월간회고]
---

## 개요

2023년 7월 한 달간의 회고록입니다. 이 달의 핵심 프로젝트는 **바로접수 기능 개발 및 안정화**였습니다. 6월에 완료된 진료 통합 기반 위에 새로운 바로접수 기능을 개발하고, 관련 UX를 대폭 개선했습니다. 총 50개의 이슈를 처리하고, 48개의 커밋(서버 32개 + 프론트 16개)을 작성했습니다.

---

## 완료한 작업

### 새 기능 개발

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #1 | [환자] 바로접수 기능 개발 | Medium | 병원 현장에서 즉시 접수할 수 있는 바로접수 핵심 기능 개발 |

### 버그 수정

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #2 | [환자] 진료과목별 병원 목록 페이지에서 병원 목록이 안보이는 문제 | Medium | 특정 진료과목 병원 목록 조회 오류 수정 |
| 이슈 #3 | [통합] 예약 방식 선택 | Medium | 예약 방식 선택 관련 버그 수정 |
| 이슈 #4 | [통합] 원격진료 신청 시 '담당의사를 몰라요'로 신청할 경우 버튼 노출 안 됨 | High | 담당의사 미지정 시 접수/취소 버튼 노출 오류 |
| 이슈 #5 | [통합] 방문접수 - 담당 의사 선택 안함으로 접수 시 서버 에러 | Medium | 담당 의사 미선택 시 서버 에러 수정 |
| 이슈 #6 | [통합] 예약 페이지 이동 탭 버그 | Medium | 탭 이동 관련 버그 수정 |
| 이슈 #7 | [통합] 방문접수(QR) - 접수 대기 환자 취소 시 서버 에러 | Medium | QR 접수 취소 시 서버 에러 수정 |
| 이슈 #8 | [통합] 원격진료 안되는 현상 | Medium | 원격진료 기능 오류 수정 |
| 이슈 #9 | [환자] 텍스트창에서 이모지 추가하면 발생하는 오류 | Low | 이모지 입력 시 발생하는 오류 수정 |
| 이슈 #10 | [통합] 초진/재진 비회원 신청 시 버튼이 보이지 않음 | Medium | 비회원 진료 신청 버튼 노출 오류 |
| 이슈 #11 | [통합] 환자와 의사가 진료실 입장 시 대기환자 탭에서 사라짐 | Medium | 진료실 입장 시 대기 환자 목록 오류 |
| 이슈 #12 | [환자] 재진 진료신청서 '직접입력' 선택 시 휴대폰번호 저장 안됨 | Medium | 직접입력 시 데이터 저장 오류 |
| 이슈 #13 | [통합] 바로접수 담당의사 지정 시 예약 접수 중지 상태 알림 모달 오류 | Medium | 잘못된 알림 모달 표시 수정 |

### 기능 개선 - 바로접수 관련

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #14 | [환자] 바로접수 후 진료 종료 시 다시 접수 가능하도록 수정 | Medium | 진료 완료 후 재접수 허용 |
| 이슈 #15 | [환자] 바로 접수 완료 화면 텍스트 수정 | Medium | 완료 화면 안내 문구 개선 |
| 이슈 #16 | [환자] 바로 접수 중 / 접수 완료 카드 수정 | Medium | 상태별 카드 UI 개선 |
| 이슈 #17 | [환자] 바로 접수 > QR접수 > 진료신청서 > 접수 플로우 개선 | Medium | 바로접수 플로우 최적화 |
| 이슈 #18 | [환자] 바로접수 안내 바텀시트 이미지 수정 | Medium | 안내 이미지 교체 |
| 이슈 #19 | [환자] 바로접수 대기 중 로딩효과 추가 | Medium | 처방전 작성 중 로딩 UX 개선 |
| 이슈 #20 | [환자] 바로접수 접수완료/병원취소 앱 알림 추가 | Medium | 푸시 알림 기능 추가 |
| 이슈 #21 | [통합, 환자] 바로접수 대기 환자 수 카운트 조건 수정 | Medium | 대기 환자 수 계산 로직 개선 |
| 이슈 #22 | [환자] 바로/방문 예약 후 QR접수 시 진료신청서 작성 과정 생략 | Medium | 중복 입력 방지 |
| 이슈 #23 | [환자] 바로접수 > 진료상세 - QR 접수 버튼 노출 | Medium | 진료상세에서 QR 접수 접근성 개선 |
| 이슈 #24 | [환자] QR 접수 후 바로 접수 신청 시 알럿 케이스 추가 | Medium | 중복 접수 방지 알림 |
| 이슈 #25 | [환자] 바로접수 QR접수 시 상세화면에 대기자 표시 | Medium | 대기자 정보 표시 |
| 이슈 #26 | [환자] QR 접수 시 대기자 카운팅 | Medium | 대기자 수 실시간 표시 |
| 이슈 #27 | [환자] 바로접수/QR 접수 알림/카드 수정 | Medium | 알림 및 카드 UI 통합 개선 |

### 기능 개선 - 통합 업데이트

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #28 | [통합] 예약 방식 선택 항목 '예약 사용 안 함' 추가 | Medium | 예약 비활성화 옵션 추가 |
| 이슈 #29 | [통합] 접수 시 담당의사 '선택 안 함' 가능하도록 수정 | High | 담당의사 미지정 접수 허용 |
| 이슈 #30 | [통합] 예약 접수 중지 상태 제거 | Medium | 불필요한 상태값 제거 |
| 이슈 #31 | [통합] 예약 페이지 - 예약 설정 전 화면 개선 | Medium | 예약 설정 전 안내 화면 |
| 이슈 #32 | [통합] '원격진료 접수' Switch 의사 카드로 이동 | High | UI 구조 개선 |
| 이슈 #33 | [통합] 예약환자 예약일 지났을 때 '예약취소' 버튼 활성화 | Medium | Disabled 상태 제거 |

### 기능 개선 - 환자앱 UI/UX

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #34 | [환자] 의사/병원 - 원격진료/방문예약 버튼 위치 변경 | Medium | 버튼 배치 개선 |
| 이슈 #35 | [환자] 의사/병원 - 진료 종료 시 원격/바로 신청 팝업 안내 | Medium | 진료 종료 상태 안내 추가 |
| 이슈 #36 | [환자] 원격/방문예약/바로접수 취소하기 정리 | Medium | 취소 플로우 일관성 확보 |
| 이슈 #37 | [환자] 의사 상세 페이지 진료신청 버튼 유효성 검사 | Medium | 버튼 활성화 조건 개선 |
| 이슈 #38 | [환자] 의사소개 - 칼럼이 없는 경우 문구 수정 | Medium | 빈 데이터 안내 문구 |
| 이슈 #39 | [환자] 즐겨찾기 포커스된 병원 리스트 직접 이동 | Medium | 즐겨찾기 접근성 개선 |
| 이슈 #40 | [환자] 병원카드 의사정렬 로직 통일 | Medium | 의사 정렬 일관성 확보 |
| 이슈 #41 | [환자] 의사/병원 - 진료 종료일 경우 케이스 추가 | Medium | 진료 종료 상태 처리 |
| 이슈 #42 | [환자] 가족추가 - 기타 추가 (형제, 남매) | Medium | 가족관계 옵션 확장 |
| 이슈 #43 | [환자] 진료내역/피드활동 병원별 필터로 수정 | Medium | 필터링 기능 개선 |
| 이슈 #44 | [환자] 방문예약 신청 완료화면 수정 | Medium | 완료 화면 UI 개선 |

### 기능 개선 - 기타

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #45 | [공통] 진료 여부 판단 기준 정리 | Medium | 진료 상태 판단 로직 문서화 |
| 이슈 #46 | [환자] 진료탭 진료 데이터 추출 API 쿼리 개선 | Medium | 쿼리 성능 최적화 |
| 이슈 #47 | [피드] 피드 상세 '의사의 다른 글' 로드 방식 개선 | Low | 로드 성능 개선 |

### 작업

| 이슈 | 제목 | 우선순위 | 설명 |
|------|------|----------|------|
| 이슈 #48 | [docs] DB Schema sql 파일 관리 | High | DB 스키마 문서화 작업 |

---

## GitLab 커밋 내역

### Backend Server (32 commits) - 바로접수 및 푸시알림

| 날짜 | 내용 |
|------|------|
| 07-20 | [docs] tb_hospital 변경된 스키마 반영 (prod 기준) |
| 07-20 | [공통] listCrmPatientReservationGroup 쿼리 수정 |
| 07-20 | [환자, 공통] 홈 - API 개선 및 개편 |
| 07-21 | [공통] ConsultGroupSearchCondition - typeList, statusList comment 수정 |
| 07-21 | [공통] 방문예약, 바로접수 - QR 접수 시, 진료신청서 재작성 과정 생략 |
| 07-21 | [공통] 의사 리스트 정렬 개선 (홈, 병원 상세, 의사 리스트 by hospital) |
| 07-21 | [환자, 공통] MyBatis common.groupBy 추가 |
| 07-24 | [공통] /consult-group GET API return 타입 변경 |
| 07-24 | [환자] /consult-group GET API 추가 |
| 07-25 | [공통] WaitingCountService |
| 07-25 | [통합, 환자, 공통] WaitingCountService |
| 07-25 | [환자, 공통] checkAlarmByHospitalSeq - 특정 병원 알림 모두 읽음 처리 |
| 07-25 | [환자, 공통] listFeedRecommend - orderBy 수정, groupBy sql 태그 수정 |
| 07-25 | [환자] /home/hospital - 병원별 읽지 않은 알림 count |
| 07-26 | [공통] AlarmPatientContent - QR 방문접수 접수 대기 푸시알림 추가 |
| 07-26 | [공통] ConsultGroupHistory - VO, SearchCondition 추가, findConsultGroupHistory 추가 |
| 07-26 | [공통] listConsultGroup - 진료내역 리스트 조회 쿼리 성능 개선 |
| 07-26 | [배치] 바로접수 - 20분 내 QR 접수 미신청 시 관리자 취소 |
| 07-27 | [공통] ConsultGroupVO - previousStatus 추가 |
| 07-27 | [공통] QR 방문접수 - AlarmPatientContentDTO appLink 추가 |
| 07-27 | [공통] waitingTurnClosePushAlarm - 접수 대기 알림 푸시 전송 조건 수정 |
| 07-27 | [공통] waitingTurnClosePushAlarm - perPage 수정 |
| 07-27 | [공통] waitingTurnClosePushAlarm - reservationDtm NullPointerException 수정 |
| 07-27 | [공통] 대기 환자 수 5명 푸시알림 - Only 푸시알림 (SMS x) |
| 07-27 | [공통] 대기 환자 수 5명 푸시알림 - 비회원 QR 접수 예외처리 |
| 07-27 | [공통] 대기 환자 수 5명 푸시알림 - 푸시알림 전송 타겟 수정 |
| 07-27 | [공통] 비회원 QR 방문접수 - AlarmPatientContentDTO appLink 추가 |
| 07-27 | [배치, 공통] 바로접수 - 20분 내 QR 접수 미신청 관리자 취소 로직 수정 |
| 07-28 | [공통] 대기 환자 수 5명 푸시알림 - 푸시알림 전송 타겟 수정 |
| 07-28 | [환자] /doctor API - 의사 정렬 로직 추가 |

### Frontend (16 commits) - 바로접수 UI 및 개선

| 날짜 | 내용 |
|------|------|
| 07-24 | [공통] 바로접수 진료 신청서 - '이미 접수한 내역이 있어요' Alert 추가 |
| 07-24 | [환자] ConsultCompleteCard - onClickConsultDetail 수정 |
| 07-24 | [환자] ConsultProcessCard - mounted $nextTick() 추가 |
| 07-24 | [환자] loadTodayReservationConsultGroup 수정 |
| 07-24 | [환자] 홈 - 코드 청소 |
| 07-25 | [환자] HospitalConsult - isLoad |
| 07-25 | [환자] loadFeedRecommendListByDoctors |
| 07-25 | [환자] my-page - 메인 버튼 텍스트 크기 수정 |
| 07-25 | [환자] 바로접수, QR 접수 - 대기 환자 수 출력 |
| 07-25 | [환자] 병원 알림 모두 읽음 처리, setBadgeCount |
| 07-26 | [환자] consultProcess.js - 진료프로세스카드, 진료상세페이지 Title, SubTitle 상수화 |
| 07-27 | [통합] 관리자 취소 - 취소 사유 메시지 추가 |
| 07-28 | [관리자] parseRelationCode - 기타 가족관계 추가 |
| 07-28 | [통합] 진료카드, 진료상세 - DateUtil.after60minutes 조건 일부 제거 |
| 07-28 | [환자] DoctorSelectModal - 의사 정렬 로직 수정 |
| 07-28 | [환자] 방문예약 - 예약 신청 완료화면 수정 |

---

## 주요 성과 및 인사이트

### 1. 바로접수 기능 개발 및 안정화 (핵심)

6월의 진료 통합 프로젝트를 기반으로 **바로접수** 기능을 새롭게 개발했습니다. 바로접수는 환자가 병원 현장에서 QR 코드를 통해 즉시 접수할 수 있는 기능입니다.

**주요 개발 내용:**
- **바로접수 핵심 기능**: 현장 즉시 접수, QR 코드 접수, 대기 환자 수 표시
- **대기자 관리**: WaitingCountService 개발, 실시간 대기 환자 수 카운팅
- **푸시 알림**: 접수 완료, 병원 취소, 대기 환자 5명 이하 알림
- **플로우 최적화**: 기존 예약 환자의 QR 접수 시 진료신청서 재작성 과정 생략

**관련 커밋:** 서버 20개 + 프론트 10개 (총 30개, 전체의 63%)

### 2. 대기 환자 푸시 알림 시스템 (이슈 #20, #27)

바로접수/QR 접수 사용자에게 대기 상황을 알려주는 푸시 알림 시스템을 구축했습니다.

**알림 종류:**
- **접수 대기 알림**: QR 접수 후 대기 상태 안내
- **대기 환자 5명 알림**: 본인 차례가 임박했음을 알림
- **접수 완료/취소 알림**: 상태 변경 시 즉시 알림

**기술적 특징:**
- 비회원 QR 접수 예외 처리
- SMS 발송 제외 (푸시알림만 발송)
- NullPointerException 방지 처리

### 3. 담당 의사 선택 유연화 (이슈 #4, #5, #29)

진료 접수 시 담당 의사를 '선택 안 함'으로 설정할 수 있도록 개선했습니다.

**개선 내용:**
- 원격진료, 방문접수 모두 담당의사 미지정 가능
- '담당의사를 몰라요' 선택 시 접수/취소 버튼 정상 노출
- 담당 의사 미선택 접수 시 서버 에러 수정

### 4. 진료내역 API 성능 개선 (이슈 #46)

진료탭의 진료 데이터(진행중, 완료, 취소) 추출 API 쿼리를 최적화했습니다.

**개선 내용:**
- listConsultGroup 쿼리 성능 개선
- ConsultGroupHistory VO 및 SearchCondition 추가
- MyBatis common.groupBy 태그 추가

### 5. 배치 작업 - 바로접수 자동 취소 (이슈 관련)

바로접수 후 20분 내에 QR 접수를 하지 않은 경우 자동으로 관리자 취소 처리하는 배치 작업을 개발했습니다.

### 6. 가족관계 옵션 확장 (이슈 #42)

가족 추가 시 선택할 수 있는 관계 옵션에 '형제', '남매' 등 기타 가족관계를 추가했습니다.

---

## 2023년 8월 계획

1. **바로접수 안정화**: 실 서비스 모니터링 및 버그 수정
2. **푸시 알림 최적화**: 알림 발송 타이밍 및 내용 개선
3. **성능 모니터링**: 쿼리 개선 효과 측정

---

## 통계

### 이슈

- **총 이슈 수**: 50개
- **완료**: 48개 (96.0%)
- **보류**: 2개 (4.0%)

| 유형 | 개수 |
|------|------|
| 새 기능 | 1개 |
| 버그 | 12개 |
| 개선 | 36개 |
| 작업 | 1개 |

| 우선순위 | 개수 |
|----------|------|
| High | 4개 |
| Medium | 44개 |
| Low | 2개 |

### 커밋

- **총 커밋 수**: 48개
- **Backend Server**: 32개
- **Frontend**: 16개

| 도메인 | 커밋 수 |
|--------|---------|
| 바로접수 기능 | 30개 (63%) |
| 푸시 알림 | 10개 |
| 기타/Merge | 8개 |

---

## 회고

2023년 7월은 **바로접수 기능**이라는 새로운 핵심 기능을 개발하고 안정화한 달이었습니다. 6월에 완료된 진료 통합 프로젝트 덕분에 바로접수 기능을 기존 시스템에 자연스럽게 통합할 수 있었습니다.

이슈 수(50개)는 이전 달들과 비슷한 수준이지만, 대부분이 **바로접수 관련 개선**(14개)과 **버그 수정**(12개)에 집중되어 있습니다. 이는 새로운 기능 출시 후 빠르게 피드백을 반영하고 안정화하는 과정이었음을 보여줍니다.

특히 **대기 환자 푸시 알림 시스템**은 사용자 경험을 크게 개선하는 기능이었습니다. 서버에서 대기 상황을 모니터링하고, 적절한 타이밍에 알림을 발송하는 로직을 구현하면서 배치 처리와 푸시 알림 시스템에 대한 이해를 높일 수 있었습니다.

또한 **담당 의사 선택 유연화**는 사용자 편의성을 높이는 중요한 개선이었습니다. '담당의사를 몰라요' 옵션을 통해 의사 지정 없이도 진료 접수가 가능해져, 처음 방문하는 환자도 쉽게 서비스를 이용할 수 있게 되었습니다.

바로접수 기능은 플라잉닥터 서비스의 핵심 기능 중 하나로, 앞으로도 지속적인 개선과 최적화가 필요할 것입니다.
