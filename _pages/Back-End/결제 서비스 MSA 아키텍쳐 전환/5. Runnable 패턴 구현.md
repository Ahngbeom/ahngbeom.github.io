---
title: "5. Runnable íŒ¨í„´ êµ¬í˜„"
date: "2025-09-04"
tags:
    - Spring Boot 3.4.0
    - Java 21
    - Record
    - Functional Interface
    - Callback Pattern
    - Reactive Programming
---

> **í•¨ìˆ˜í˜• ì½œë°± íŒ¨í„´ìœ¼ë¡œ ê²°ì œ ì´ë²¤íŠ¸ ì²˜ë¦¬**
>
> Java 21 Recordì™€ Functional Interfaceë¥¼ í™œìš©í•œ PaymentAdapterRunnable ì„¤ê³„ì™€ ê²°ì œ í”„ë¡œì„¸ìŠ¤ì˜ ê° ë‹¨ê³„ë³„ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì„ ë‹¤ë£¹ë‹ˆë‹¤.

---

## ğŸ¯ Runnable íŒ¨í„´ì´ í•„ìš”í•œ ì´ìœ 

### ê²°ì œ ì²˜ë¦¬ì˜ ë³µì¡ì„±

```
ê²°ì œ ìš”ì²­
  â†“
1. UUID ìƒì„± (ì¦‰ì‹œ ì‘ë‹µ í•„ìš”)
  â†“
2. DB ì €ì¥
  â†“
3. PGì‚¬ API í˜¸ì¶œ (ë„¤íŠ¸ì›Œí¬ ì§€ì—°)
  â†“
4-A. ì„±ê³µ ì²˜ë¦¬        4-B. ì‹¤íŒ¨ ì²˜ë¦¬
   â†“                     â†“
5-A. ì„±ê³µ ì½œë°±       5-B. ì—ëŸ¬ ì½œë°±
   â†“                     â†“
6-A. Order ìƒíƒœ ì—…ë°ì´íŠ¸  6-B. ì¬ì‹œë„/ì•Œë¦¼
```

**ë¬¸ì œ:**

- âŒ ê° ë‹¨ê³„ë§ˆë‹¤ ë‹¤ë¥¸ ì²˜ë¦¬ ë¡œì§ í•„ìš”
- âŒ ì„±ê³µ/ì‹¤íŒ¨ì— ë”°ë¥¸ ë¶„ê¸° ì²˜ë¦¬
- âŒ ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œ ì½œë°± ë³µì¡ë„ ì¦ê°€
- âŒ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ êµ¬ì¡°

### Runnable íŒ¨í„´ ì ìš©

```java
// âœ… Good: ê° ì´ë²¤íŠ¸ë¥¼ í•¨ìˆ˜ë¡œ ì „ë‹¬
paymentPort.payment(request, PaymentAdapterRunnable.paymentRunnable(
    // UUID ìƒì„± ì‹œ
    uuid -> log.info("íŠ¸ëœì­ì…˜ ìƒì„±: {}", uuid),

    // ì„±ê³µ ì‹œ
    (uuid, response) -> orderService.markAsCompleted(uuid),

    // ì‹¤íŒ¨ ì‹œ
    (uuid, error) -> orderService.markAsFailed(uuid)
));
```

**ì¥ì :**

- âœ… ê° ì´ë²¤íŠ¸ë¥¼ **ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬**
- âœ… **ëŒë‹¤ì‹**ìœ¼ë¡œ ê°„ê²°í•œ ì½”ë“œ
- âœ… **í…ŒìŠ¤íŠ¸ ìš©ì´**: ê° ì½œë°±ì„ ê°œë³„ í…ŒìŠ¤íŠ¸
- âœ… **ì¬ì‚¬ìš©ì„±**: ê³µí†µ ì½œë°± ë¡œì§ ì¶”ì¶œ

---

## ğŸ—ï¸ PaymentAdapterRunnable êµ¬ì¡°

### Record ê¸°ë°˜ ì„¤ê³„

```java
package com.payment.adapter;

/**
 * ê²°ì œ ì²˜ë¦¬ ê³¼ì •ì˜ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” Runnable
 * Java 21 Recordë¥¼ í™œìš©í•œ ë¶ˆë³€ ì½œë°± ê°ì²´
 *
 * @param <T> ì‘ë‹µ íƒ€ì… (BaseResponse, RefundResponse, etc.)
 */
public record PaymentAdapterRunnable<T>(
    CreateUuidRunnable createUuidRunnable,
    SuccessRunnable<T> successRunnable,
    ErrorRunnable errorRunnable) {

  // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë“¤...
}
```

### í•µì‹¬ Functional Interface ì •ì˜

```java
/**
 * UUID ìƒì„± ì‹œ í˜¸ì¶œë˜ëŠ” ì½œë°±
 */
@FunctionalInterface
public interface CreateUuidRunnable {
  void run(String uuid);
}

/**
 * ê²°ì œ ì„±ê³µ ì‹œ í˜¸ì¶œë˜ëŠ” ì½œë°±
 */
@FunctionalInterface
public interface SuccessRunnable<T> {
  void run(String uuid, T response);
}

/**
 * ê²°ì œ ì‹¤íŒ¨ ì‹œ í˜¸ì¶œë˜ëŠ” ì½œë°±
 */
@FunctionalInterface
public interface ErrorRunnable {
  void run(String uuid, Exception exception);
}
```

**ì„¤ê³„ íŠ¹ì§•:**

- âœ… `@FunctionalInterface`: ëŒë‹¤ì‹ ì‚¬ìš© ê°€ëŠ¥
- âœ… ëª…í™•í•œ íŒŒë¼ë¯¸í„°: UUIDì™€ ì‘ë‹µ/ì—ëŸ¬ ì „ë‹¬
- âœ… ì œë„¤ë¦­ íƒ€ì…: ë‹¤ì–‘í•œ ì‘ë‹µ íƒ€ì… ì§€ì›

---

## ğŸ¨ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ

### 1ï¸âƒ£ paymentRunnable() - ê²°ì œ ìš”ì²­

```java
/**
 * ì¼ë°˜ ê²°ì œ ìš”ì²­ìš© Runnable
 * UUID ìƒì„±, ì„±ê³µ, ì‹¤íŒ¨ ëª¨ë“  ì½œë°± í¬í•¨
 */
public static PaymentAdapterRunnable<BaseResponse> paymentRunnable(
    CreateUuidRunnable createUuidRunnable,
    SuccessRunnable<BaseResponse> successRunnable,
    ErrorRunnable errorRunnable) {

  return new PaymentAdapterRunnable<>(
      createUuidRunnable,
      successRunnable,
      errorRunnable
  );
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
PaymentAdapterRunnable<BaseResponse> runnable =
    PaymentAdapterRunnable.paymentRunnable(
        // 1. UUID ìƒì„± ì½œë°±
        uuid -> {
          log.info("ê²°ì œ íŠ¸ëœì­ì…˜ ìƒì„±: {}", uuid);
          // í´ë¼ì´ì–¸íŠ¸ì— ì¦‰ì‹œ ì‘ë‹µ
          asyncResponse.resume(ResponseEntity.ok(uuid));
        },

        // 2. ì„±ê³µ ì½œë°±
        (uuid, response) -> {
          log.info("ê²°ì œ ì„±ê³µ: {}", uuid);
          orderService.updateOrderStatus(uuid, OrderStatus.PAID);
          notificationService.sendPaymentSuccessEmail(uuid);
        },

        // 3. ì—ëŸ¬ ì½œë°±
        (uuid, error) -> {
          log.error("ê²°ì œ ì‹¤íŒ¨: {}", uuid, error);
          orderService.updateOrderStatus(uuid, OrderStatus.PAYMENT_FAILED);
          notificationService.sendPaymentFailedEmail(uuid);
        }
    );

paymentPort.payment(request, runnable);
```

### 2ï¸âƒ£ callbackRunnable() - Webhook ì½œë°±

```java
/**
 * PGì‚¬ Webhook ì½œë°± ì²˜ë¦¬ìš© Runnable
 * UUID ìƒì„± ë¶ˆí•„ìš” (ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íŠ¸ëœì­ì…˜)
 */
public static PaymentAdapterRunnable<Void> callbackRunnable(
    SuccessRunnable<Void> successRunnable,
    ErrorRunnable errorRunnable) {

  return new PaymentAdapterRunnable<>(
      uuid -> {}, // ë¹ˆ êµ¬í˜„ (UUID ì´ë¯¸ ì¡´ì¬)
      successRunnable,
      errorRunnable
  );
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
@PostMapping("/callback/payment")
public ResponseEntity<Void> handlePaymentCallback(
    @RequestBody PaymentCallbackRequest request,
    @RequestParam String hash) {

  PaymentAdapterRunnable<Void> runnable =
      PaymentAdapterRunnable.callbackRunnable(
          // ì„±ê³µ ì½œë°±
          (uuid, response) -> {
            log.info("Webhook ì²˜ë¦¬ ì™„ë£Œ: {}", uuid);
            orderService.finalizeOrder(uuid);
          },

          // ì—ëŸ¬ ì½œë°±
          (uuid, error) -> {
            log.error("Webhook ì²˜ë¦¬ ì‹¤íŒ¨: {}", uuid, error);
            alertService.sendWebhookErrorAlert(uuid);
          }
      );

  paymentPort.callback(request, hash, runnable);
  return ResponseEntity.ok().build();
}
```

### 3ï¸âƒ£ refundRunnable() - í™˜ë¶ˆ ì²˜ë¦¬

```java
/**
 * í™˜ë¶ˆ ìš”ì²­ìš© Runnable
 */
public static PaymentAdapterRunnable<RefundResponse> refundRunnable(
    SuccessRunnable<RefundResponse> successRunnable,
    ErrorRunnable errorRunnable) {

  return new PaymentAdapterRunnable<>(
      uuid -> {},
      successRunnable,
      errorRunnable
  );
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
public RefundResponse processRefund(String transactionId, Long amount) {

  PaymentAdapterRunnable<RefundResponse> runnable =
      PaymentAdapterRunnable.refundRunnable(
          // ì„±ê³µ ì½œë°±
          (uuid, response) -> {
            log.info("í™˜ë¶ˆ ì™„ë£Œ: {} - {}ì›", uuid, response.getRefundedAmount());
            orderService.updateOrderStatus(uuid, OrderStatus.REFUNDED);
            accountingService.processRefundAccounting(uuid, response);
          },

          // ì—ëŸ¬ ì½œë°±
          (uuid, error) -> {
            log.error("í™˜ë¶ˆ ì‹¤íŒ¨: {}", uuid, error);
            // í™˜ë¶ˆ ì‹¤íŒ¨ëŠ” ì¤‘ìš” ì´ë²¤íŠ¸ - ê´€ë¦¬ì ì•Œë¦¼
            alertService.sendRefundFailureAlert(uuid, error.getMessage());
          }
      );

  return paymentPort.refund(
      RefundRequest.builder()
          .transactionId(transactionId)
          .refundAmount(amount)
          .build(),
      runnable
  );
}
```

### 4ï¸âƒ£ sendBillKakaoTalkRunnable() - ì¹´ì¹´ì˜¤í†¡ ì²­êµ¬ì„œ

```java
/**
 * ì¹´ì¹´ì˜¤í†¡ ì²­êµ¬ì„œ ë°œì†¡ìš© Runnable
 */
public static PaymentAdapterRunnable<KakaoTalkResponse> sendBillKakaoTalkRunnable(
    SuccessRunnable<KakaoTalkResponse> successRunnable,
    ErrorRunnable errorRunnable) {

  return new PaymentAdapterRunnable<>(
      uuid -> {},
      successRunnable,
      errorRunnable
  );
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
public KakaoTalkResponse sendPaymentBill(Long userId, Long amount) {

  PaymentAdapterRunnable<KakaoTalkResponse> runnable =
      PaymentAdapterRunnable.sendBillKakaoTalkRunnable(
          // ì„±ê³µ ì½œë°±
          (uuid, response) -> {
            log.info("ì²­êµ¬ì„œ ë°œì†¡ ì„±ê³µ: {}", uuid);
            billService.saveBillInfo(uuid, response.getBillUrl());
            notificationService.sendBillSentNotification(userId);
          },

          // ì—ëŸ¬ ì½œë°±
          (uuid, error) -> {
            log.error("ì²­êµ¬ì„œ ë°œì†¡ ì‹¤íŒ¨: {}", uuid, error);
            // ì²­êµ¬ì„œ ë°œì†¡ ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„
            retryService.scheduleRetry(uuid, 3);
          }
      );

  return paymentPort.sendBill(
      TalkRequest.builder()
          .userId(userId)
          .amount(amount)
          .build(),
      runnable
  );
}
```

### 5ï¸âƒ£ destroyRunnable() - ì²­êµ¬ì„œ íŒŒê¸°

```java
/**
 * ì²­êµ¬ì„œ íŒŒê¸°ìš© Runnable
 */
public static PaymentAdapterRunnable<DestroyResponse> destroyRunnable(
    SuccessRunnable<DestroyResponse> successRunnable,
    ErrorRunnable errorRunnable) {

  return new PaymentAdapterRunnable<>(
      uuid -> {},
      successRunnable,
      errorRunnable
  );
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
public void cancelBill(String billKey) {

  PaymentAdapterRunnable<DestroyResponse> runnable =
      PaymentAdapterRunnable.destroyRunnable(
          // ì„±ê³µ ì½œë°±
          (uuid, response) -> {
            log.info("ì²­êµ¬ì„œ íŒŒê¸° ì™„ë£Œ: {}", uuid);
            billService.markAsDestroyed(uuid);
          },

          // ì—ëŸ¬ ì½œë°±
          (uuid, error) -> {
            log.error("ì²­êµ¬ì„œ íŒŒê¸° ì‹¤íŒ¨: {}", uuid, error);
            // ì´ë¯¸ ë§Œë£Œëœ ì²­êµ¬ì„œëŠ” ë¬´ì‹œ
            if (error.getMessage().contains("EXPIRED")) {
              billService.markAsExpired(uuid);
            }
          }
      );

  paymentPort.destroy(
      DestroyRequest.builder().billKey(billKey).build(),
      runnable
  );
}
```

---

## ğŸ”„ Adapterì—ì„œ Runnable ì‹¤í–‰

### TossAdapter ë‚´ë¶€ êµ¬í˜„

```java
@Override
public PaymentResponse payment(
    PaymentRequest payload,
    PaymentAdapterRunnable<BaseResponse> runnable) {

  try {
    // 1. íŠ¸ëœì­ì…˜ ì—”í‹°í‹° ìƒì„±
    Transaction entity = transactionService.create(/*...*/);

    // 2. UUID ì½œë°± ì‹¤í–‰ â­
    runnable.createUuidRunnable().run(entity.getUuid().toString());

    // 3. PGì‚¬ API í˜¸ì¶œ
    TossPaymentResponse response = tossPgClient.payment(request);

    // 4. ì„±ê³µ ì—¬ë¶€ì— ë”°ë¥¸ ì½œë°± ì‹¤í–‰
    if (response.isSuccess()) {
      // ì„±ê³µ ì½œë°± ì‹¤í–‰ â­
      runnable.successRunnable().run(
          entity.getUuid().toString(),
          response
      );

      return PaymentResponse.success(/*...*/);

    } else {
      // ì—ëŸ¬ ì½œë°± ì‹¤í–‰ â­
      runnable.errorRunnable().run(
          entity.getUuid().toString(),
          new PaymentException(response.getErrorMessage())
      );

      return PaymentResponse.failure(/*...*/);
    }

  } catch (Exception e) {
    // ì˜ˆì™¸ ë°œìƒ ì‹œ ì—ëŸ¬ ì½œë°± ì‹¤í–‰ â­
    runnable.errorRunnable().run(null, e);
    throw new PaymentException("ê²°ì œ ì²˜ë¦¬ ì‹¤íŒ¨", e);
  }
}
```

---

## ğŸ’¡ ê³ ê¸‰ í™œìš© íŒ¨í„´

### 1ï¸âƒ£ ê³µí†µ ì½œë°± ë¡œì§ ì¶”ì¶œ

```java
/**
 * ê³µí†µ ì„±ê³µ ì½œë°± ë¡œì§
 */
public class CommonPaymentCallbacks {

  /**
   * ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸ + ì´ë©”ì¼ ë°œì†¡
   */
  public static SuccessRunnable<BaseResponse> orderUpdateAndNotify(
      OrderService orderService,
      NotificationService notificationService) {

    return (uuid, response) -> {
      orderService.updateOrderStatus(uuid, OrderStatus.PAID);
      notificationService.sendPaymentSuccessEmail(uuid);
      log.info("ê²°ì œ ì„±ê³µ ì²˜ë¦¬ ì™„ë£Œ: {}", uuid);
    };
  }

  /**
   * ê²°ì œ ì‹¤íŒ¨ ì²˜ë¦¬ + ê´€ë¦¬ì ì•Œë¦¼
   */
  public static ErrorRunnable orderFailureAndAlert(
      OrderService orderService,
      AlertService alertService) {

    return (uuid, error) -> {
      orderService.updateOrderStatus(uuid, OrderStatus.PAYMENT_FAILED);
      alertService.sendPaymentFailureAlert(uuid, error.getMessage());
      log.error("ê²°ì œ ì‹¤íŒ¨ ì²˜ë¦¬ ì™„ë£Œ: {}", uuid, error);
    };
  }
}
```

**ì‚¬ìš©:**

```java
PaymentAdapterRunnable<BaseResponse> runnable =
    PaymentAdapterRunnable.paymentRunnable(
        uuid -> asyncResponse.resume(uuid),
        CommonPaymentCallbacks.orderUpdateAndNotify(orderService, notificationService),
        CommonPaymentCallbacks.orderFailureAndAlert(orderService, alertService)
    );
```

### 2ï¸âƒ£ ë¹„ë™ê¸° ì²˜ë¦¬ì™€ ê²°í•©

```java
@Service
@RequiredArgsConstructor
public class AsyncPaymentService {

  private final PaymentPort paymentPort;
  private final OrderService orderService;

  /**
   * ë¹„ë™ê¸° ê²°ì œ ì²˜ë¦¬
   */
  @Async("paymentExecutor")
  public CompletableFuture<PaymentResponse> processPaymentAsync(
      PaymentRequest request) {

    CompletableFuture<String> uuidFuture = new CompletableFuture<>();
    CompletableFuture<PaymentResponse> resultFuture = new CompletableFuture<>();

    PaymentAdapterRunnable<BaseResponse> runnable =
        PaymentAdapterRunnable.paymentRunnable(
            // UUID ìƒì„± ì‹œ Future ì™„ë£Œ
            uuid -> uuidFuture.complete(uuid),

            // ì„±ê³µ ì‹œ Future ì™„ë£Œ
            (uuid, response) -> {
              orderService.updateOrderStatus(uuid, OrderStatus.PAID);
              resultFuture.complete(PaymentResponse.success(uuid, response));
            },

            // ì‹¤íŒ¨ ì‹œ Future ì˜ˆì™¸ ì™„ë£Œ
            (uuid, error) -> {
              orderService.updateOrderStatus(uuid, OrderStatus.PAYMENT_FAILED);
              resultFuture.completeExceptionally(error);
            }
        );

    try {
      PaymentResponse response = paymentPort.payment(request, runnable);
      resultFuture.complete(response);
    } catch (Exception e) {
      resultFuture.completeExceptionally(e);
    }

    return resultFuture;
  }
}
```

### 3ï¸âƒ£ ì´ë²¤íŠ¸ ë°œí–‰ê³¼ ê²°í•©

```java
@Service
@RequiredArgsConstructor
public class EventDrivenPaymentService {

  private final PaymentPort paymentPort;
  private final ApplicationEventPublisher eventPublisher;

  public PaymentResponse processPayment(PaymentRequest request) {

    PaymentAdapterRunnable<BaseResponse> runnable =
        PaymentAdapterRunnable.paymentRunnable(
            // UUID ìƒì„± ì´ë²¤íŠ¸
            uuid -> eventPublisher.publishEvent(
                new PaymentInitiatedEvent(uuid)
            ),

            // ì„±ê³µ ì´ë²¤íŠ¸
            (uuid, response) -> eventPublisher.publishEvent(
                new PaymentSuccessEvent(uuid, response)
            ),

            // ì‹¤íŒ¨ ì´ë²¤íŠ¸
            (uuid, error) -> eventPublisher.publishEvent(
                new PaymentFailedEvent(uuid, error)
            )
        );

    return paymentPort.payment(request, runnable);
  }
}

/**
 * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
 */
@Component
@RequiredArgsConstructor
class PaymentEventListener {

  private final OrderService orderService;
  private final NotificationService notificationService;

  @EventListener
  public void handlePaymentSuccess(PaymentSuccessEvent event) {
    orderService.completeOrder(event.getUuid());
    notificationService.sendSuccessNotification(event.getUuid());
  }

  @EventListener
  public void handlePaymentFailure(PaymentFailedEvent event) {
    orderService.markOrderFailed(event.getUuid());
    notificationService.sendFailureNotification(event.getUuid());
  }
}
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### Mock Runnable í™œìš©

```java
@Test
void ê²°ì œ_ì„±ê³µ_ì‹œ_ì„±ê³µ_ì½œë°±_í˜¸ì¶œ() {
  // Given
  AtomicReference<String> capturedUuid = new AtomicReference<>();
  AtomicBoolean successCalled = new AtomicBoolean(false);

  PaymentAdapterRunnable<BaseResponse> runnable =
      PaymentAdapterRunnable.paymentRunnable(
          uuid -> capturedUuid.set(uuid),
          (uuid, response) -> successCalled.set(true),
          (uuid, error) -> fail("ì—ëŸ¬ ì½œë°±ì´ í˜¸ì¶œë˜ë©´ ì•ˆë¨")
      );

  // When
  PaymentResponse response = tossAdapter.payment(createValidRequest(), runnable);

  // Then
  assertThat(response.getStatus()).isEqualTo(PaymentStatus.SUCCESS);
  assertThat(capturedUuid.get()).isNotNull();
  assertThat(successCalled.get()).isTrue();
}

@Test
void ê²°ì œ_ì‹¤íŒ¨_ì‹œ_ì—ëŸ¬_ì½œë°±_í˜¸ì¶œ() {
  // Given
  AtomicBoolean errorCalled = new AtomicBoolean(false);
  AtomicReference<Exception> capturedException = new AtomicReference<>();

  PaymentAdapterRunnable<BaseResponse> runnable =
      PaymentAdapterRunnable.paymentRunnable(
          uuid -> {},
          (uuid, response) -> fail("ì„±ê³µ ì½œë°±ì´ í˜¸ì¶œë˜ë©´ ì•ˆë¨"),
          (uuid, error) -> {
            errorCalled.set(true);
            capturedException.set(error);
          }
      );

  // PGì‚¬ APIê°€ ì—ëŸ¬ ì‘ë‹µì„ ë°˜í™˜í•˜ë„ë¡ Mock ì„¤ì •
  when(tossPgClient.payment(any())).thenReturn(errorResponse());

  // When
  PaymentResponse response = tossAdapter.payment(createValidRequest(), runnable);

  // Then
  assertThat(response.getStatus()).isEqualTo(PaymentStatus.FAILED);
  assertThat(errorCalled.get()).isTrue();
  assertThat(capturedException.get()).isInstanceOf(PaymentException.class);
}
```

---

## ğŸ’¡ ì„¤ê³„ ì›ì¹™ ì •ë¦¬

### 1ï¸âƒ£ ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)

> ê° ì½œë°±ì€ í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ë§Œ ì²˜ë¦¬

```java
// âœ… Good: ê° ì½œë°±ì˜ ì±…ì„ ëª…í™•
createUuidRunnable -> UUID ìƒì„± ì‹œì  ì²˜ë¦¬ë§Œ
successRunnable -> ì„±ê³µ ì‹œ ì²˜ë¦¬ë§Œ
errorRunnable -> ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬ë§Œ

// âŒ Bad: í•˜ë‚˜ì˜ ì½œë°±ì—ì„œ ëª¨ë“  ê²ƒ ì²˜ë¦¬
allInOneRunnable -> ëª¨ë“  ìƒí™© ì²˜ë¦¬ (ë³µì¡ë„ ì¦ê°€)
```

### 2ï¸âƒ£ ê°œë°©-íì‡„ ì›ì¹™ (OCP)

> ìƒˆë¡œìš´ ì½œë°± ë¡œì§ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ

```java
// âœ… ìƒˆë¡œìš´ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì¶”ê°€
public static PaymentAdapterRunnable<NewResponse> newTypeRunnable(...) {
  return new PaymentAdapterRunnable<>(...);
}
```

### 3ï¸âƒ£ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°

> ëŒë‹¤ì‹ê³¼ ì œë„¤ë¦­ì„ í™œìš©í•œ ê°„ê²°í•œ ì½”ë“œ

```java
// âœ… ëŒë‹¤ì‹ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ
(uuid, response) -> log.info("Success: {}", uuid)

// âŒ ìµëª… í´ë˜ìŠ¤ (ì¥í™©í•¨)
new SuccessRunnable<BaseResponse>() {
  @Override
  public void run(String uuid, BaseResponse response) {
    log.info("Success: {}", uuid);
  }
}
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Functional Interface ì •ì˜ ì™„ë£Œ
- [ ] Record ê¸°ë°˜ PaymentAdapterRunnable êµ¬í˜„
- [ ] ëª¨ë“  ê²°ì œ ìœ í˜•ë³„ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ ì‘ì„±
- [ ] Adapterì—ì„œ ì½œë°± ì‹¤í–‰ êµ¬í˜„
- [ ] ê³µí†µ ì½œë°± ë¡œì§ ì¶”ì¶œ
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] ì´ë²¤íŠ¸ ë°œí–‰ íŒ¨í„´ ì ìš© (ì„ íƒ)
- [ ] ë¹„ë™ê¸° ì²˜ë¦¬ í†µí•© (ì„ íƒ)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

[6. ì¸í„°í˜ì´ìŠ¤ ì¶”ìƒí™”](/Back-End/ê²°ì œ-ì„œë¹„ìŠ¤-MSA-ì•„í‚¤í…ì³-ì „í™˜/6-ì¸í„°í˜ì´ìŠ¤-ì¶”ìƒí™”)ë¡œ ì´ë™í•˜ì—¬ ìµœì¢… ì•„í‚¤í…ì²˜ êµ¬ì¡°ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

**Runnable íŒ¨í„´ ì™„ë£Œ! ì´ì œ ìµœì¢… ì •ë¦¬ë¡œ!** ğŸ’ª