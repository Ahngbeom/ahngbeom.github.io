---
title: "Dockerfile 분석"
date: "2025-08-26"
bookmark: true
tags:
    - Docker
    - Dockerfile
---

## Dockerfile

- `FROM`: 베이스 이미지. 어느 이미지에서 초기화 세팅을 할 것인지 명시
- `ARG`: 빌드 시점에 전달할 수 있는 인자 지정
  - `ARG`로 지정한 변수는 `ENV`로 지정한 환경 변수와 다르게, 이미지가 빌드된 이후에는 접근할 수 없다.
  - `ARG`로 지정한 변수는 `ENV`로 지정한 환경 변수와 다르게, 도커파일 내에서만 접근할 수 있다.
  - `ARG`로 지정한 변수는 `ENV`로 지정한 환경 변수와 다르게, 컨테이너 내부에서는 접근할 수 없다.
- `WORKDIR`: 작업 디렉토리 지정. (해당 디렉토리가 존재하지 않다면 생성)
작업 디렉토리를 지정할 경우 이후 명령어는 해당 디렉토리의 위치에서 수행한다. (cd 명령어와 동일)
- `COPY`: build 명령 중간 과정에서 파일 또는 폴더를 이미지에 가져오는 명령
- `RUN`: 새로운 레이어에서 명령어를 수행하고, 새로운 이미지를 생성한다.
  - `RUN` 명령어를 수행할 때마다 레이어가 생성되고 캐시된다.
- `ENV`: 이미지에서 사용할 환경 변수 값을 지정한다.
- `CMD` / `ENTRYPOINT`: 컨테이너를 생성 및 실행할 때 수행할 명령어 지정
  - 보통 컨테이너 내부에서 항상 구동되어야하는 서버를 올릴 때 사용한다.
  - `ENTRYPOINT`
    - 컨테이너를 시작할 때마다 실행. (docker start)
    - 컨테이너 시작 시, 추가적인 명령어 존재 여부와 상관 없이 무조건 실행.

### References

- <https://wooono.tistory.com/123>

---

## Docker Build

### Options

- `-t`, `--tag`: 빌드된 이미지에 태그를 지정
- `-f`, `--file`: 사용할 도커파일의 경로를 지정한다. 기본값은 .Dockerfile
- `-q`, `--quiet`: 빌드 진행 상황 메시지를 출력하지 않는다.
- `--build-arg`: 도커파일 내에서 ARG 지시문에 전달할 빌드 인자를 지정.

### References

- <https://mvje.tistory.com/169>
